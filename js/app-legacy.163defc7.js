(function(e){function t(t){for(var a,r,c=t[0],u=t[1],l=t[2],d=t[3]||[],m=0,h=[];m<c.length;m++)r=c[m],Object.prototype.hasOwnProperty.call(o,r)&&o[r]&&h.push(o[r][0]),o[r]=0;for(a in u)Object.prototype.hasOwnProperty.call(u,a)&&(e[a]=u[a]);p&&p(t),s.push.apply(s,d);while(h.length)h.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],a=!0,r=1;r<n.length;r++){var l=n[r];0!==o[l]&&(a=!1)}a&&(i.splice(t--,1),e=u(u.s=n[0]))}return 0===i.length&&(s.forEach((function(e){if(void 0===o[e]){o[e]=null;var t=document.createElement("link");u.nc&&t.setAttribute("nonce",u.nc),t.rel="prefetch",t.as="script",t.href=c(e),document.head.appendChild(t)}})),s.length=0),e}var a={},r={app:0},o={app:0},i=[],s=[];function c(e){return u.p+"js/"+({about:"about",login:"login",viewer:"viewer"}[e]||e)+"-legacy."+{about:"3bfc320d",login:"d749e0ca",viewer:"0c74ee0a"}[e]+".js"}function u(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,u),n.l=!0,n.exports}u.e=function(e){var t=[],n={about:1,login:1,viewer:1};r[e]?t.push(r[e]):0!==r[e]&&n[e]&&t.push(r[e]=new Promise((function(t,n){for(var a="css/"+({about:"about",login:"login",viewer:"viewer"}[e]||e)+"."+{about:"340beea3",login:"e5fa26fb",viewer:"86ed01af"}[e]+".css",o=u.p+a,i=document.getElementsByTagName("link"),s=0;s<i.length;s++){var c=i[s],l=c.getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(l===a||l===o))return t()}var d=document.getElementsByTagName("style");for(s=0;s<d.length;s++){c=d[s],l=c.getAttribute("data-href");if(l===a||l===o)return t()}var m=document.createElement("link");m.rel="stylesheet",m.type="text/css",m.onload=t,m.onerror=function(t){var a=t&&t.target&&t.target.src||o,i=new Error("Loading CSS chunk "+e+" failed.\n("+a+")");i.code="CSS_CHUNK_LOAD_FAILED",i.request=a,delete r[e],m.parentNode.removeChild(m),n(i)},m.href=o;var p=document.getElementsByTagName("head")[0];p.appendChild(m)})).then((function(){r[e]=0})));var a=o[e];if(0!==a)if(a)t.push(a[2]);else{var i=new Promise((function(t,n){a=o[e]=[t,n]}));t.push(a[2]=i);var s,l=document.createElement("script");l.charset="utf-8",l.timeout=120,u.nc&&l.setAttribute("nonce",u.nc),l.src=c(e);var d=new Error;s=function(t){l.onerror=l.onload=null,clearTimeout(m);var n=o[e];if(0!==n){if(n){var a=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+a+": "+r+")",d.name="ChunkLoadError",d.type=a,d.request=r,n[1](d)}o[e]=void 0}};var m=setTimeout((function(){s({type:"timeout",target:l})}),12e4);l.onerror=l.onload=s,document.head.appendChild(l)}return Promise.all(t)},u.m=e,u.c=a,u.d=function(e,t,n){u.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},u.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},u.t=function(e,t){if(1&t&&(e=u(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(u.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)u.d(n,a,function(t){return e[t]}.bind(null,a));return n},u.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return u.d(t,"a",t),t},u.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},u.p="",u.oe=function(e){throw console.error(e),e};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],d=l.push.bind(l);l.push=t,l=l.slice();for(var m=0;m<l.length;m++)t(l[m]);var p=d,h=function(){return i.push([0,"chunk-vendors"]),n()}();t([[],{},0,["about","login","viewer"]])})({0:function(e,t,n){e.exports=n("cd49")},"049b":function(e,t,n){"use strict";var a=n("90a2"),r=n.n(a),o=n("0613"),i=new r.a({baseUrl:"https://afp-apicore-prod.afp.com",customAuthUrl:"https://3o3qoiah2e.execute-api.eu-central-1.amazonaws.com/ondeck",saveToken:function(e){e&&o["a"].commit("setToken",e)}});t["a"]=i},"0613":function(e,t,n){"use strict";n.d(t,"b",(function(){return T}));n("d3b7"),n("3ca3"),n("ddb0"),n("96cf");var a=n("1da1"),r=n("2b0e"),o=n("2f62"),i=(n("4ec9"),n("d4ec")),s=function e(){Object(i["a"])(this,e),this.columns=[],this.documents=new Map,this.authType="unknown",this.isOnline=!0,this.displayInstallApp=!1,this.locale="fr"===Object({NODE_ENV:"production",BASE_URL:""}).VUE_APP_I18N_LOCALE?"fr":"en"},c=(n("4de4"),n("c740"),n("caad"),n("d81d"),n("2532"),n("5530")),u={getDocumentById:function(e){return function(t){return e.documents.get(t)}},getColumnByIndex:function(e){return function(t){return e.columns[t]}},getDocumentsIdsByColumnId:function(e,t){return function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return t.getColumnByIndex(e).documentsIds.filter((function(e){return n||!e.includes("documents-gap")}))}},getDocumentsByColumnId:function(e,t){return function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return t.getDocumentsIdsByColumnId(e,n).map((function(e){return t.getDocumentById(e)}))}},isAnonymous:function(e){return"anonymous"===e.authType},isAuthenticated:function(e){return"credentials"===e.authType},getPreviousDocumentIdInColById:function(e,t){return function(e,n){var a=t.getDocumentsByColumnId(e,!1),r=a.findIndex((function(e){return e.uno===n})),o=a[r+1];return o&&o.uno||!1}},getNextDocumentIdInColById:function(e,t){return function(e,n){var a=t.getDocumentsByColumnId(e,!1),r=a.findIndex((function(e){return e.uno===n})),o=a[r-1];return o&&o.uno||!1}},getFirstDocumentInCol:function(e,t){return function(e){var n=t.getDocumentsIdsByColumnId(e,!1)[0];return t.getDocumentById(n)}},getLastDocumentInCol:function(e,t){return function(e){var n=t.getDocumentsIdsByColumnId(e,!1).pop();return t.getDocumentById(n)}},getRefreshParamsByMode:function(e,t){return function(e,n){switch(n){case"reset":return t.getColumnByIndex(e).params;case"before":var a=t.getLastDocumentInCol(e),r=new Date(a.published);return r.setSeconds(r.getSeconds()-1),Object(c["a"])(Object(c["a"])({},t.getColumnByIndex(e).params),{},{dateTo:r.toISOString()});case"after":var o=t.getFirstDocumentInCol(e),i=new Date(o.published);return i.setSeconds(i.getSeconds()+1),Object(c["a"])(Object(c["a"])({},t.getColumnByIndex(e).params),{},{dateFrom:i.toISOString()});default:throw new Error("Invalid mode")}}}},l=(n("99af"),n("7db0"),n("4160"),n("c975"),n("4e82"),n("a434"),n("6062"),n("159b"),n("2909")),d=n("049b"),m=n("ec26"),p=(n("a15b"),n("ac1f"),n("1276"),n("bee2"));function h(e){if(void 0!==e){var t=new Date(e);return t instanceof Date&&!isNaN(t.valueOf())?t:void 0}}var f=function(){function e(t){Object(i["a"])(this,e),this.docSource=t}return Object(p["a"])(e,[{key:"toObject",value:function(){return{uno:this.docSource.uno,headline:this.headline,published:this.published,embargoed:this.embargoed,lang:this.docSource.lang,product:this.docSource.product,urgency:this.docSource.urgency,news:this.docSource.news,slugs:this.docSource.slug,medias:this.medias,iptc:this.docSource.iptc,source:this.docSource.source,creator:this.docSource.creator,provider:this.docSource.provider,city:this.docSource.city,country:this.docSource.country,advisory:this.docSource.advisory,status:this.docSource.status,summary:this.docSource.summary,genre:this.genre,event:this.event}}},{key:"headline",get:function(){var e=this.docSource.headline||this.docSource.title||this.docSource.news;return Array.isArray(e)?e.join(" - "):e}},{key:"embargoed",get:function(){return h(this.docSource.embargoed)}},{key:"published",get:function(){var e=h(this.docSource.published);if(!e)throw new Error("Doc ".concat(this.docSource.uno," doesn't contain a valid published date"));return e}},{key:"medias",get:function(){var e=this.docSource.bagItem;if(!e)return[];var t,n=this.docSource.entity_faces,a=e[0].medias.find((function(e){return"HighDef"===e.role}));if(n&&n[0]&&a){var r=n[0].faces[0].offsetY;t=r/a.height}return e.map((function(e){return{sizes:e.medias.sort((function(e,t){return e.width-t.width})),creator:e.creator,provider:e.provider,caption:e.caption,source:e.source,uno:e.uno,faceYOffsetPercent:t}}))}},{key:"genre",get:function(){if(this.docSource.genre)return!1===Array.isArray(this.docSource.genre)?this.docSource.genre:this.docSource.genre[0]}},{key:"event",get:function(){if(this.docSource.afpentity&&this.docSource.afpentity.event&&!1!==Array.isArray(this.docSource.afpentity.event)&&this.docSource.afpentity.event[0]&&this.docSource.afpentity.event[0].qcode&&this.docSource.afpentity.event[0].keyword)return{id:this.docSource.afpentity.event[0].qcode.split(":")[1],name:this.docSource.afpentity.event[0].keyword.split(" : ")[1]}}}]),e}(),g={addColumn:function(e,t){var n={id:Object(m["a"])(),params:Object.assign({},d["a"].defaultSearchParams,{products:["multimedia"],size:10,sources:["afp","AFPTV","AFP Vidéographie","AFP Videographics","AFP Vidéographic","AFPTV / AFP Videografik"]}),documentsIds:[]};t&&t.params&&(t.params=Object.assign(n.params,t.params));var a=Object.assign({},n,t);e.columns.find((function(e){return e.id===a.id}))||e.columns.push(a)},moveColumn:function(e,t){var n=t.indexCol,a=t.dir,r=e.columns.map((function(e){return e.id})),o="left"===a?n-1:n+1,i=r[n];r.splice(n,1),r.splice(o,0,i),e.columns.sort((function(e,t){return r.indexOf(e.id)-r.indexOf(t.id)}))},closeColumn:function(e,t){var n=t.indexCol;e.columns=e.columns.filter((function(e,t){return t!==n}))},resetColumn:function(e,t){var n=t.indexCol;e.columns[n].documentsIds=[]},updateColumnParams:function(e,t){var n=t.indexCol,a=t.params;e.columns[n].params=a},setToken:function(e,t){e.authType=t.authType},unsetToken:function(e){e.authType="unknown"},addDocuments:function(e,t){t.map((function(e){return new f(e).toObject()})).forEach((function(t){return e.documents.set(t.uno,t)}))},clearDocuments:function(e){e.columns.forEach((function(e){e.documentsIds=[]})),e.documents.clear()},prependDocumentsIdsToCol:function(e,t){var n=t.indexCol,a=t.documentsIds,r=e.columns[n].documentsIds,o=r.findIndex((function(e){return!e.includes("documents-gap")}));o>0&&r.splice(0,o),e.columns[n].documentsIds=Object(l["a"])(new Set(a.concat(r)))},appendDocumentsIdsToCol:function(e,t){var n=t.indexCol,a=t.documentsIds,r=e.columns[n].documentsIds;e.columns[n].documentsIds=Object(l["a"])(new Set(r.concat(a)))},setConnectivityStatus:function(e,t){e.isOnline=t},setLocale:function(e,t){e.locale=t},resetState:function(e){Object.assign(e,new s)},displayInstallApp:function(e,t){e.displayInstallApp=t}},v=(n("841c"),n("fe0b")),b=n("70cb"),y={changeLocale:function(e,t){return Object(a["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=e.commit,n.next=3,Object(v["b"])(t);case 3:Object(b["a"])(t),a("setLocale",t);case 5:case"end":return n.stop()}}),n)})))()},logout:function(e){var t=e.commit,n=e.dispatch;return t("unsetToken"),t("clearDocuments"),n("refreshAllColumns")},authenticate:function(e){var t=arguments;return Object(a["a"])(regeneratorRuntime.mark((function n(){var a,o,i,s,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=e.commit,o=e.dispatch,i=t.length>1&&void 0!==t[1]?t[1]:{},s=i.username,c=i.password,n.prev=2,n.next=5,d["a"].authenticate({username:s,password:c});case 5:a("clearDocuments"),o("refreshAllColumns",{mode:"reset"}),n.next=13;break;case 9:return n.prev=9,n.t0=n["catch"](2),r["default"].toasted.global.apiError(n.t0),n.abrupt("return",Promise.reject(n.t0));case 13:case"end":return n.stop()}}),n,null,[[2,9]])})))()},searchDocuments:function(e,t){return Object(a["a"])(regeneratorRuntime.mark((function n(){var a,r,o,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=e.commit,r=e.dispatch,n.prev=1,r("wait/start","documents.search",{root:!0}),n.next=5,d["a"].search(t);case 5:if(o=n.sent,i=o.documents,i){n.next=9;break}return n.abrupt("return",[]);case 9:return a("addDocuments",i),n.abrupt("return",i.map((function(e){return new f(e).toObject()})));case 11:return n.prev=11,r("wait/end","documents.search",{root:!0}),n.finish(11);case 14:case"end":return n.stop()}}),n,null,[[1,,11,14]])})))()},refreshColumn:function(e,t){return Object(a["a"])(regeneratorRuntime.mark((function n(){var a,r,o,i,s,c,u,l,m,p,h,f;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(a=e.state,r=e.commit,o=e.dispatch,i=e.getters,s=e.rootGetters,c=t.indexCol,u=t.mode,!s["wait/is"]("column.refreshing.".concat(a.columns[c].id))){n.next=4;break}return n.abrupt("return");case 4:return n.prev=4,"reset"===u?r("resetColumn",{indexCol:c}):0===i.getDocumentsIdsByColumnId(c,!1).length&&(u="reset"),l=i.getRefreshParamsByMode(c,u),o("wait/start","column.refreshing.".concat(a.columns[c].id),{root:!0}),n.next=10,d["a"].search(l);case 10:if(m=n.sent,p=m.documents,h=m.count,p&&0!==p.length){n.next=15;break}return n.abrupt("return",!1);case 15:r("addDocuments",p),f=p.map((function(e){return e.uno})),n.t0=u,n.next="reset"===n.t0||"before"===n.t0?20:"after"===n.t0?22:25;break;case 20:return r("appendDocumentsIdsToCol",{indexCol:c,documentsIds:f}),n.abrupt("break",25);case 22:return h>p.length&&f.push("documents-gap|".concat(+new Date,"|").concat(h-p.length)),r("prependDocumentsIdsToCol",{indexCol:c,documentsIds:f}),n.abrupt("break",25);case 25:return n.abrupt("return",!0);case 26:return n.prev=26,o("wait/end","column.refreshing.".concat(a.columns[c].id),{root:!0}),n.finish(26);case 29:case"end":return n.stop()}}),n,null,[[4,,26,29]])})))()},refreshAllColumns:function(e){var t=arguments;return Object(a["a"])(regeneratorRuntime.mark((function n(){var a,o,i,s,c,u;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(a=e.state,o=e.dispatch,i=e.rootGetters,s=t.length>1&&void 0!==t[1]?t[1]:{},c=s.mode,u=void 0===c?"after":c,!i["wait/is"]("column.refreshing.all")){n.next=4;break}return n.abrupt("return");case 4:return n.prev=4,o("wait/start","column.refreshing.all",{root:!0}),n.next=8,Promise.all(a.columns.map((function(e,t){return o("refreshColumn",{indexCol:t,mode:u})})));case 8:n.next=13;break;case 10:n.prev=10,n.t0=n["catch"](4),r["default"].toasted.global.apiError(n.t0);case 13:return n.prev=13,o("wait/end","column.refreshing.all",{root:!0}),n.finish(13);case 16:case"end":return n.stop()}}),n,null,[[4,10,13,16]])})))()},getDocument:function(e,t){return Object(a["a"])(regeneratorRuntime.mark((function n(){var a,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=e.commit,n.prev=1,n.next=4,d["a"].get(t);case 4:o=n.sent,a("addDocuments",[o]),n.next=12;break;case 8:return n.prev=8,n.t0=n["catch"](1),r["default"].toasted.global.apiError(n.t0),n.abrupt("return",Promise.reject(n.t0));case 12:case"end":return n.stop()}}),n,null,[[1,8]])})))()}},w=y,C=n("a002"),k=n.n(C),I=(n("f79f"),n("a98c"),{columns:"afpnews-deck-columns",token:"afpnews-deck-token",client:"afpnews-deck-client",clientId:"afpnews-deck-client-id",clientSecret:"afpnews-deck-client-secret",autoRefresh:"afpnews-deck-auto-refresh",locale:"afpnews-deck-locale"}),O=k.a.createInstance({name:"userStore"}),x=k.a.createInstance({name:"documentsStore"}),S=function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,O.getItem(I.token);case 2:n=e.sent,n&&(d["a"].token=n,t.commit("setToken",n));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=function(e){e.subscribe((function(e,t){var n=e.type,a=e.payload;switch(n){case"setToken":"credentials"===a.authType?O.setItem(I.token,a):O.removeItem(I.token);break;case"unsetToken":d["a"].resetToken(),O.removeItem(I.token);break;default:}}))},A=(n("07ac"),n("3835")),$=function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var n,a,r,o,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([I.locale,I.columns].map((function(e){return O.getItem(e)})));case 2:if(n=e.sent,a=Object(A["a"])(n,2),r=a[0],o=a[1],null===r||t.state.locale===r){e.next=9;break}return e.next=9,t.dispatch("changeLocale",r);case 9:return e.next=11,x.getItems();case 11:i=e.sent,t.commit("addDocuments",Object.values(i)),Array.isArray(o)&&o.length>0?o.forEach((function(e){return t.commit("addColumn",Object(c["a"])(Object(c["a"])({},e),{},{documentsIds:e.documentsIds.filter((function(e){return e.includes("documents-gap")||i[e]}))}))})):(t.commit("addColumn",{id:Object(m["a"])(),params:Object.assign({},d["a"].defaultSearchParams,{products:["multimedia"],topics:["Monde"],langs:["fr"],size:10,sources:["afp","AFPTV","AFP Vidéographie","AFP Videographics","AFP Vidéographic","AFPTV / AFP Videografik"]}),documentsIds:[]}),t.commit("addColumn",{id:Object(m["a"])(),params:Object.assign({},d["a"].defaultSearchParams,{products:["multimedia"],topics:["Politique"],langs:["fr"],size:10,sources:["afp","AFPTV","AFP Vidéographie","AFP Videographics","AFP Vidéographic","AFPTV / AFP Videografik"]}),documentsIds:[]}),t.commit("addColumn",{id:Object(m["a"])(),params:Object.assign({},d["a"].defaultSearchParams,{products:["multimedia"],topics:["Economie/Finances","service-eco-fr"],langs:["fr"],size:10,sources:["afp","AFPTV","AFP Vidéographie","AFP Videographics","AFP Vidéographic","AFPTV / AFP Videografik"]}),documentsIds:[]}));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(e){e.subscribe(function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(n,a){var r,o,i,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:r=n.type,o=n.payload,t.t0=r,t.next="setLocale"===t.t0?4:"addColumn"===t.t0||"moveColumn"===t.t0||"updateColumnParams"===t.t0||"appendDocumentsIdsToCol"===t.t0||"prependDocumentsIdsToCol"===t.t0?6:"closeColumn"===t.t0||"resetColumn"===t.t0?8:"resetState"===t.t0?16:"clearDocuments"===t.t0?20:"addDocuments"===t.t0?23:25;break;case 4:return O.setItem(I.locale,o),t.abrupt("break",25);case 6:return O.setItem(I.columns,a.columns),t.abrupt("break",25);case 8:return i=[],i.concat.apply([],a.columns.map((function(e){return e.documentsIds}))),t.next=12,x.keys();case 12:return s=t.sent,s.filter((function(e){return!i.includes(e)})).forEach((function(e){return x.removeItem(e)})),O.setItem(I.columns,a.columns),t.abrupt("break",25);case 16:return O.clear(),x.clear(),e.commit("addColumn"),t.abrupt("break",25);case 20:return x.clear(),O.setItem(I.columns,a.columns),t.abrupt("break",25);case 23:return x.setItems(o.map((function(e){return{key:e.uno,value:e}}))),t.abrupt("break",25);case 25:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}())},_=function(e){e.subscribe(function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t,n){var a,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=t.type,e.t0=a,e.next="addColumn"===e.t0?4:9;break;case 4:return e.next=6,r["default"].nextTick();case 6:return o=document.querySelector(".column:last-of-type"),o&&o.scrollIntoView({behavior:"smooth",block:"end"}),e.abrupt("break",9);case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())};r["default"].use(o["b"]);var D=new o["a"]({state:new s,getters:u,mutations:g,actions:w,modules:{},plugins:[j,P,_],strict:!1}),T=(t["a"]=D,function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([S(D),$(D)]);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}())},"0a3e":function(e,t,n){},"0acc":function(e,t,n){"use strict";n("66e3")},"13a5":function(e,t,n){"use strict";n("a13f")},"13d6":function(e,t,n){},"151d":function(e,t,n){},"18e3":function(e,t,n){},"199e":function(e,t,n){},2476:function(e,t,n){},"39c3":function(e,t,n){var a={"./en.json":"edd4","./fr.json":"f693"};function r(e){return Promise.resolve().then((function(){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}var r=a[e];return n.t(r,3)}))}r.keys=function(){return Object.keys(a)},r.id="39c3",e.exports=r},"3c4b":function(e,t,n){"use strict";n("7497")},"40e6":function(e,t,n){"use strict";n("dced")},4820:function(e,t,n){"use strict";n("151d")},"52b8":function(e,t,n){},5365:function(e,t,n){e.exports=n.p+"img/afp_logo.346ca232.png"},"66e3":function(e,t,n){},"6d95":function(e,t,n){"use strict";n("199e")},"70cb":function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));n("4de4");var a=n("2b0e"),r=n("5a0c"),o=n.n(r),i=n("4208"),s=n.n(i);n("e5b7");o.a.extend(s.a);var c={install:function(e){e.filter("fromNow",(function(e,t){return o()(e).from(o()(t))}))}};function u(e){o.a.locale(e)}a["default"].use(c)},7497:function(e,t,n){},"7f9a0":function(e,t,n){"use strict";n("18e3")},"859f":function(e,t,n){},a13f:function(e,t,n){},a798:function(e,t,n){"use strict";n("859f")},a90f:function(e,t,n){"use strict";n("0a3e")},ada6:function(e,t,n){"use strict";n("2476")},ae8d:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.doc?n("router-link",{staticClass:"article",class:{flash:1===e.doc.urgency,alerte:"photo"!==e.doc.product&&2===e.doc.urgency,urgent:"photo"!==e.doc.product&&3===e.doc.urgency,photo:"photo"===e.doc.product,multimedia:"multimedia"===e.doc.product,news:"news"===e.doc.product,video:["sidtv","parismode","afptvweb","afptv1st","videographie"].includes(e.doc.product),canceled:"Canceled"===e.doc.status},attrs:{lang:e.doc.lang,dir:"ar"===e.doc.lang?"rtl":"ltr",to:{name:"document",params:{indexCol:e.indexCol,docId:e.docId}}}},[e.doc.medias.length>0&&e.doc.medias[0].sizes.some((function(e){return"Preview"===e.role||"HighDef"===e.role}))?n("div",{staticClass:"img-container",style:{backgroundImage:"url("+e.selectPreview(e.doc.medias[0].sizes).href+")",backgroundPosition:e.doc.medias[0].faceYOffsetPercent?"0px "+100*e.doc.medias[0].faceYOffsetPercent+"%":null}},[["sidtv","parismode","afptvweb","afptv1st","videographie"].includes(e.doc.product)?n("i",{staticClass:"UI-icon UI-play-video"}):e._e()]):e._e(),n("div",{staticClass:"cols"},[e.doc.embargoed&&e.doc.embargoed>new Date?n("p",{key:"date-"+e.locale,staticClass:"date embargo"},[e._v(" Embargo : "+e._s(e._f("fromNow")(e.doc.embargoed,e.$root.$now))+" ")]):n("p",{key:"date-"+e.locale,staticClass:"date"},[e._v(" "+e._s(e._f("fromNow")(e.doc.published,e.$root.$now))+" ")]),"photo"===e.doc.product&&1===e.doc.urgency?n("p",{staticClass:"genre"},[e._v(" Topshot ")]):e.doc.genre?n("p",{staticClass:"genre"},[n("span",[e._v(" "+e._s(e.doc.genre)+" ")])]):e._e()]),"photo"!==e.doc.product?n("h2",[e._v(" "+e._s(e.doc.headline)+" ")]):e._e(),["news","multimedia"].includes(e.doc.product)&&e.doc.urgency>2&&e.doc.news&&e.doc.news[0]&&"Usable"===e.doc.status?n("p",{staticClass:"lead"},[e._v(" "+e._s(e.doc.news[0].substr(0,100)+"...")+" ")]):e._e()]):e._e()},r=[],o=(n("7db0"),n("a9e3"),n("5530")),i=n("2f62"),s={name:"Card",props:{docId:{type:String,required:!0},indexCol:{type:Number,required:!1,default:null}},computed:Object(o["a"])(Object(o["a"])(Object(o["a"])({},Object(i["f"])(["locale"])),Object(i["d"])(["getDocumentById"])),{},{doc:function(){return this.getDocumentById(this.docId)}}),methods:{selectPreview:function(e){return e.find((function(e){return"Preview"===e.role}))||e.find((function(e){return"HighDef"===e.role}))}}},c=s,u=(n("7f9a0"),n("2877")),l=Object(u["a"])(c,a,r,!1,null,"fd7f99a2",null);t["a"]=l.exports},b27f:function(e,t,n){"use strict";n("13d6")},b814:function(e,t,n){"use strict";var a,r=n("0613"),o=n("0284");window.addEventListener("beforeinstallprompt",(function(e){a=e,r["a"].commit("displayInstallApp",!0),a.userChoice.then((function(e){var t=e.outcome;"accepted"===t&&r["a"].commit("displayInstallApp",!1),Object(o["event"])("pwa","installation",t)}))})),window.addEventListener("appinstalled",(function(e){Object(o["event"])("pwa","installation","installed")})),t["a"]=function(){a.prompt()}},cd49:function(e,t,n){"use strict";n.r(t);n("b0c0"),n("ac1f"),n("5319"),n("96cf");var a=n("1da1"),r=(n("e260"),n("e6cf"),n("cca6"),n("a79d"),n("2b0e")),o=(n("eb2f"),n("58ca"));r["default"].use(o["a"]);var i=n("a65d"),s=n.n(i),c=n("0613");r["default"].use(s.a),r["default"].toasted.register("error",(function(e){return console.error(e),e.message?"Oops.. ".concat(e.message):"Oops.. Something went wrong.."}),{type:"error",position:"bottom-center",duration:1500,singleton:!0}),r["default"].toasted.register("warn",(function(e){return console.warn(e),"Oops.. ".concat(e)}),{type:"error",position:"bottom-center",duration:1500,singleton:!0}),r["default"].toasted.register("apiError",(function(e){return 401===e.code?c["a"].dispatch("logout"):console.error(e),e.message?"Oops.. ".concat(e.message):"Oops.. Something went wrong with the API.."}),{type:"error",position:"bottom-center",duration:1e3,singleton:!0});var u=n("0284"),l=n.n(u),d=(n("99af"),n("caad"),n("a15b"),n("d81d"),n("d3b7"),n("25f0"),n("2532"),n("1276"),n("8c4f")),m=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("main",[n("navbar"),e.isAuthenticated?n("transition-group",{attrs:{id:"columns",name:"list",tag:"div"}},[e._l(e.columns,(function(e,t){return n("column",{key:"column-"+e.id,attrs:{"column-id":t}})})),n("add-column",{key:"add-column"})],2):e._e(),n("side-bar"),n("router-view")],1)},p=[],h=n("5530"),f=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"column"},[n("search-params",{attrs:{"column-id":e.columnId},on:{reset:e.reset,close:e.close,move:function(t){return e.move(t)}}}),n("recyclist",{ref:"recyclist",staticClass:"documents",attrs:{list:e.documents,size:10,offset:200,"is-loading":e.$wait.is("column.refreshing."+e.column.id),"no-more":e.noMore},on:{"load-top":e.loadAfter,"load-bottom":e.loadBefore},scopedSlots:e._u([{key:"tombstone",fn:function(){return[n("content-placeholders",{staticClass:"tombstone",attrs:{animated:!0,rounded:!0,centered:!1}},[n("content-placeholders-heading",{attrs:{img:!1}}),n("content-placeholders-img"),n("content-placeholders-text",{attrs:{lines:2}})],1)]},proxy:!0},{key:"item",fn:function(t){var a=t.data;return[a.includes("documents-gap")?n("div",{staticClass:"documents-gap"},[n("p",[e._v(" "+e._s(e.$tc("column.documents-gap",parseInt(a.split("|")[2]),{count:parseInt(a.split("|")[2])}))+" "),n("router-link",{attrs:{to:"/"},nativeOn:{click:function(t){return e.reset(t)}}},[e._v(" "+e._s(e.$t("column.refresh"))+" ")])],1)]):n("card",{attrs:{"doc-id":a,"index-col":e.columnId}})]}},{key:"nomore",fn:function(){return[n("span",[e._v(e._s(e.$t("column.no-result")))])]},proxy:!0}])})],1)},g=[],v=(n("a9e3"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("header",[e.paramsOpen?n("div",{staticClass:"actions"},[n("button",{staticClass:"btn btn-icon",attrs:{name:"move-left","aria-label":"Move column to left"},on:{click:function(t){return e.$emit("move","left")}}},[n("i",{staticClass:"UI-icon UI-navigate-left"})]),n("button",{staticClass:"btn btn-icon margin-right-auto",attrs:{name:"move-right","aria-label":"Move column to right"},on:{click:function(t){return e.$emit("move","right")}}},[n("i",{staticClass:"UI-icon UI-navigate-right"})]),n("button",{staticClass:"btn btn-icon",attrs:{name:"close-params","aria-label":"Close column params"},on:{click:function(t){e.paramsOpen=!1}}},[n("i",{staticClass:"UI-icon UI-collapse"})])]):e._e(),n("div",{staticClass:"form-group inpt-icon"},[n("search-input",{attrs:{type:!0===e.paramsOpen?"search":"text","initial-query":e.params.query},on:{submit:e.onQueryChange}}),!1===e.paramsOpen?n("button",{staticClass:"btn btn-icon",attrs:{name:"expand","aria-label":"Open column params"},on:{click:function(t){e.paramsOpen=!0}}},[n("i",{staticClass:"UI-icon UI-expand icon-small"})]):e._e()],1),n("transition-group",{staticClass:"form",attrs:{name:"curtain",tabindex:"-1",tag:"div"}},[e.paramsOpen?n("select",{directives:[{name:"show",rawName:"v-show",value:e.languages.length>1,expression:"languages.length > 1"},{name:"model",rawName:"v-model",value:e.lang,expression:"lang"}],key:"lang",staticClass:"slct slct-large",attrs:{name:"lang","aria-label":"Select a language"},on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.lang=t.target.multiple?n:n[0]}}},e._l(e.languages,(function(t){var a=t.label,r=t.value,o=t.disabled;return n("option",{key:r.join("|"),attrs:{disabled:o},domProps:{value:r}},[e._v(" "+e._s(a)+" ")])})),0):e._e(),e.paramsOpen?n("select",{directives:[{name:"show",rawName:"v-show",value:e.topics.length>1,expression:"topics.length > 1"},{name:"model",rawName:"v-model",value:e.topic,expression:"topic"}],key:"topic",staticClass:"slct slct-large",attrs:{name:"topic","aria-label":"Select a topic"},on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.topic=t.target.multiple?n:n[0]}}},e._l(e.topics.filter((function(e){return!e.disabled})),(function(t){var a=t.label,r=t.value;return n("option",{key:r.join("|"),domProps:{value:r}},[e._v(" "+e._s(a)+" ")])})),0):e._e(),e.paramsOpen?n("button",{key:"close",staticClass:"btn btn-large danger",attrs:{name:"close","aria-label":"Delete the column"},on:{click:function(t){return e.$emit("close")}}},[e._v(" "+e._s(e.$t("column.delete"))+" ")]):e._e()])],1)}),b=[],y=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("input",{ref:"search",staticClass:"search inpt inpt-large",attrs:{placeholder:e.$t("column.search"),"aria-label":e.$t("column.search"),type:e.type,autocomplete:"off",name:"query"},domProps:{value:e.initialQuery},on:{change:e.onQueryChange,focus:e.onQueryFocus}})},w=[],C=(n("049b"),{name:"SearchInput",components:{},props:{type:{type:String,required:!1,default:"search"},initialQuery:{type:String,required:!1,default:""}},data:function(){return{input:""}},computed:{},methods:{onQueryChange:function(e){var t=e.target.value;this.$emit("submit",t)},onQueryFocus:function(e){e.target.setSelectionRange(e.target.value.length,e.target.value.length)}}}),k=C,I=(n("3c4b"),n("2877")),O=Object(I["a"])(k,y,w,!1,null,null,null),x=O.exports,S=n("2f62"),j={name:"SearchParams",components:{SearchInput:x},props:{columnId:{type:Number,required:!0}},data:function(){return{paramsOpen:!1}},computed:Object(h["a"])(Object(h["a"])({},Object(S["d"])(["getColumnByIndex","isAuthenticated"])),{},{column:function(){return this.getColumnByIndex(this.columnId)},params:function(){return this.column.params},languages:function(){return[{label:this.$t("languages.all"),value:[],disabled:!1},{label:this.$t("languages.en"),value:["en"],disabled:!1},{label:this.$t("languages.fr"),value:["fr"],disabled:!1},{label:this.$t("languages.de"),value:["de"],disabled:!1},{label:this.$t("languages.es"),value:["es"],disabled:!1},{label:this.$t("languages.pt"),value:["pt"],disabled:!1},{label:this.$t("languages.ar"),value:["ar"],disabled:!1},{label:this.$t("languages.zh-tw"),value:["zh-tw"],disabled:!1},{label:this.$t("languages.zh-cn"),value:["zh-cn"],disabled:!1}]},lang:{get:function(){return this.params.langs},set:function(e){this.updateParams({langs:e,topics:[]})}},topics:function(){return"fr"===this.lang[0]?[{label:this.$t("topics.all","fr"),value:[]},{label:this.$t("topics.a-la-une","fr"),value:["La une"]},{label:this.$t("topics.derniere-minute","fr"),value:["Dernière Minute"]},{label:this.$t("topics.documentation","fr"),value:["Documentation"]},{label:this.$t("topics.monde","fr"),value:["Monde"]},{label:this.$t("topics.afrique","fr"),value:["Afrique"]},{label:this.$t("topics.politique","fr"),value:["Politique"]},{label:this.$t("topics.elections","fr"),value:["Elections"]},{label:this.$t("topics.faits-divers","fr"),value:["Faits-divers"]},{label:this.$t("topics.environnement","fr"),value:["Environnement/Météo","Environnement"]},{label:this.$t("topics.sport","fr"),value:["Sport"]},{label:this.$t("topics.football","fr"),value:["Football"]},{label:this.$t("topics.people","fr"),value:["People"]},{label:this.$t("topics.tech","fr"),value:["High Tech"]},{label:this.$t("topics.sciences","fr"),value:["Sciences"]},{label:this.$t("topics.insolite","fr"),value:["Insolite"]},{label:this.$t("topics.medias","fr"),value:["Médias"]},{label:this.$t("topics.sante","fr"),value:["Médecine/Santé"]},{label:this.$t("topics.mode-de-vie","fr"),value:["Société/Modes de vie"]},{label:this.$t("topics.art-de-vivre","fr"),value:["Culture/Art de vivre"]},{label:this.$t("topics.galerie-photos","fr"),value:["Galerie Photos"]},{label:this.$t("topics.galerie-photos-insolites","fr"),value:["Galerie Photos Insolites"]},{label:this.$t("topics.videographies","fr"),value:["Vidéographies"]},{label:this.$t("topics.videos-monde","fr"),value:["Vidéos Monde"]}]:"en"===this.lang[0]?[{label:this.$t("topics.all","en"),value:[]},{label:this.$t("topics.a-la-une","en"),value:["Top Stories"]},{label:this.$t("topics.derniere-minute","en"),value:["Breaking News"]},{label:this.$t("topics.documentation","en"),value:["Doc"]},{label:this.$t("topics.monde","en"),value:["International News"]},{label:this.$t("topics.us-news","en"),value:["US News"]},{label:this.$t("topics.us-politics"),value:["US Politics"]},{label:this.$t("topics.us-sports"),value:["US Sports"]},{label:this.$t("topics.uk-news"),value:["UK News"]},{label:this.$t("topics.middle-east","en"),value:["Middle East"]},{label:this.$t("topics.south-asia-news","en"),value:["South Asia News"]},{label:this.$t("topics.asia-business","en"),value:["Asia Business"]},{label:this.$t("topics.business-tech","en"),value:["Business and Tech"]},{label:this.$t("topics.science-environment","en"),value:["Science-Environment"]},{label:this.$t("topics.offbeat","en"),value:["Offbeat"]},{label:this.$t("topics.health-lifestyle","en"),value:["Health and Lifestyle"]},{label:this.$t("topics.sport","en"),value:["Sports"]},{label:this.$t("topics.cricket","en"),value:["Cricket"]},{label:this.$t("topics.football","en"),value:["Football"]},{label:this.$t("topics.olympics","en"),value:["Olympics"]},{label:this.$t("topics.people","en"),value:["People and Entertainment"]},{label:this.$t("topics.lifestyle","en"),value:["Lifestyle"]},{label:this.$t("topics.photo-gallery","en"),value:["Photo Gallery"]},{label:this.$t("topics.videographics","en"),value:["Videographics"]},{label:this.$t("topics.video-gallery","en"),value:["Video Gallery Complete"]}]:[{label:this.$t("topics.all"),value:[]}]},topic:{get:function(){return this.params.topics},set:function(e){this.updateParams({topics:e})}},query:function(){return this.params.query},dateTo:{get:function(){return this.params.dateTo},set:function(e){this.updateParams({dateTo:e})}}}),methods:Object(h["a"])(Object(h["a"])(Object(h["a"])({},Object(S["e"])(["updateColumnParams","openColumnSettings","closeColumnSettings"])),Object(S["c"])(["refreshColumn"])),{},{updateParams:function(e){var t=Object(h["a"])(Object(h["a"])({},this.params),e);this.updateColumnParams({indexCol:this.columnId,params:t}),this.$emit("reset")},onQueryChange:function(e){this.$ga.event("search","set query",e),this.updateParams({query:e})}})},A=j,$=(n("0acc"),Object(I["a"])(A,v,b,!1,null,"6ef1547f",null)),P=$.exports,_=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"vue-recyclist"},[n("div",{ref:"list",staticClass:"vue-recyclist-items",style:{height:e.height+"px"}},[e._l(e.visibleItems,(function(t,a){return n("div",{directives:[{name:"show",rawName:"v-show",value:e.height>0,expression:"height > 0"}],key:a,staticClass:"vue-recyclist-item",style:{transform:"translate3d(0,"+t.top+"px,0)"}},[t.data?e._t("item",null,{data:t.data}):e._t("tombstone")],2)})),n("div",{staticClass:"vue-recyclist-pool"},[e._l(e.poolItems,(function(t,a){return n("div",{key:a,ref:t.data,refInFor:!0,staticClass:"vue-recyclist-item"},[e._t("item",null,{data:t.data})],2)})),0===e.tombHeight?n("div",{ref:"tomb",staticClass:"vue-recyclist-item"},[e._t("tombstone")],2):e._e()],2)],2),!e.isLoading&&e.noMore?n("div",{staticClass:"vue-recyclist-nomore"},[e._t("nomore",[n("div",[e._v("End of list")])])],2):e._e()])},D=[],T=(n("4de4"),n("fb6a"),n("3835")),E=(n("3ca3"),n("ddb0"),n("0342")),F=n.n(E),L=[new F.a("Poppins",{weight:400,style:"normal",stretch:"normal"}),new F.a("Poppins",{weight:600,style:"normal",stretch:"normal"})],R=function(){return Promise.all(L.map((function(e){return e.load()})))},N={name:"Recyclist",props:{list:{type:Array,required:!0},size:{type:Number,default:20},offset:{type:Number,default:200},isLoading:{type:Boolean,default:!1},noMore:{type:Boolean,default:!1}},data:function(){return{items:[],height:0,start:0,containerHeight:0,tombHeight:0}},computed:{visibleItems:function(){return this.items.slice(Math.max(0,this.start-this.size),Math.min(this.items.length,this.start+this.size))},poolItems:function(){return this.items.filter((function(e){return e.data&&!1===e.gotHeight}))}},watch:{start:function(e,t){0===e&&t>e&&this.$emit("loadTop")},list:function(){this.loadList()},noMore:function(e){!0===e&&(this.items=this.items.filter((function(e){return e.data})),this.updateItemTop())}},mounted:function(){this.$el.addEventListener("scroll",this.onScroll,{capture:!0,passive:!0}),this.tombHeight=this.$refs.tomb&&this.$refs.tomb.offsetHeight,this.containerHeight=this.$el&&this.$el.offsetHeight,this.list.length>0?(this.loadList(),this.list.length<this.size&&this.loadMoreItems()):this.loadMoreItems()},destroyed:function(){this.$el.removeEventListener("scroll",this.onScroll)},methods:{reset:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.items=[],e.height=e.start=e.$el.scrollTop=0,t.next=4,e.$nextTick();case 4:e.loadMoreItems();case 5:case"end":return t.stop()}}),t)})))()},loadList:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.items=e.list.map(e.renderItem),t.next=3,R();case 3:return t.next=5,e.$nextTick();case 5:for(n=0;n<e.items.length;n++)e.updateItemHeight(n);e.updateItemTop();case 7:case"end":return t.stop()}}),t)})))()},loadMoreItems:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.noMore){t.next=2;break}return t.abrupt("return",!1);case 2:for(n=e.items.length+e.size,a=e.items.length;a<n;a++)e.setItem(a,null);e.updateItemTop(),e.$emit("load-bottom");case 6:case"end":return t.stop()}}),t)})))()},setItem:function(e,t){this.$set(this.items,e,this.renderItem(t))},renderItem:function(e){return{data:e,top:0,height:this.tombHeight,gotHeight:!1}},updateItemTop:function(){this.height=0;for(var e=0;e<this.items.length;e++){var t=this.items[e-1];this.$set(this.items[e],"top",t?t.top+t.height:0),this.height+=this.items[e].height}this.updateIndex()},updateIndex:function(){for(var e=this.$el.scrollTop,t=0;t<this.items.length;t++)if(this.items[t].top>e){this.start=Math.max(0,t-1);break}},updateItemHeight:function(e){var t=this.items[e];if(t.data){var n=Object(T["a"])(this.$refs[t.data],1),a=n[0];a&&(this.$set(this.items[e],"height",a.offsetHeight),this.$set(this.items[e],"gotHeight",a.offsetHeight>0))}},onScroll:function(){this.$el.scrollTop+this.$el.offsetHeight>this.height-this.offset&&this.loadMoreItems(),this.updateIndex()}}},B=N,M=(n("a90f"),Object(I["a"])(B,_,D,!1,null,"47f9749e",null)),V=M.exports,q=n("967d"),U=n("ae8d"),z={name:"Column",components:{Card:U["a"],Recyclist:V,ContentPlaceholders:q["ContentPlaceholders"],ContentPlaceholdersHeading:q["ContentPlaceholdersHeading"],ContentPlaceholdersImg:q["ContentPlaceholdersImg"],ContentPlaceholdersText:q["ContentPlaceholdersText"],SearchParams:P},props:{columnId:{type:Number,required:!0}},data:function(){return{noMore:!1}},computed:Object(h["a"])(Object(h["a"])({},Object(S["d"])(["getColumnByIndex","getDocumentsIdsByColumnId","isAuthenticated"])),{},{column:function(){return this.getColumnByIndex(this.columnId)},documents:function(){return this.getDocumentsIdsByColumnId(this.columnId)},params:function(){return this.column.params}}),methods:Object(h["a"])(Object(h["a"])(Object(h["a"])({},Object(S["e"])(["resetColumn","moveColumn","closeColumn"])),Object(S["c"])(["refreshColumn"])),{},{reset:function(){this.noMore=!1,this.resetColumn({indexCol:this.columnId}),this.$refs.recyclist.reset()},loadBefore:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.refreshColumn({indexCol:e.columnId,mode:"before"});case 3:n=t.sent,!1===n&&(e.noMore=!0),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),e.$toasted.global.apiError(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},loadAfter:function(){try{return this.refreshColumn({indexCol:this.columnId,mode:"after"})}catch(e){this.$toasted.global.apiError(e)}},move:function(e){this.moveColumn({indexCol:this.columnId,dir:e})},close:function(){this.closeColumn({indexCol:this.columnId})}})},H=z,G=(n("a798"),n("6d95"),Object(I["a"])(H,f,g,!1,null,"26739aaf",null)),Q=G.exports,Y=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("nav",{staticClass:"navbar is-primary is-fixed-top",attrs:{role:"navigation","aria-label":"main navigation"}},[e._m(0),n("div",{staticClass:"navbar-menu"},[n("div",{staticClass:"navbar-end"},[n("router-link",{key:"about",staticClass:"navbar-item",attrs:{to:{name:"about"},name:"about","aria-label":"about"}},[e._v(" "+e._s(e.$t("about.name"))+" ")]),n("a",{staticClass:"navbar-item"},[e._v(" Feedback ")]),e.isAuthenticated?n("a",{staticClass:"navbar-item",attrs:{"aria-label":"Log out"},on:{click:function(t){return t.preventDefault(),e.logoutHandler(t)}}},[e._v(" "+e._s(e.$t("auth.logout"))+" ")]):e._e(),e.isAuthenticated?e._e():n("router-link",{key:"authenticate",staticClass:"navbar-item",attrs:{to:{name:"login"},name:"authenticate","aria-label":"Authenticate"}},[e._v(" "+e._s(e.$t("auth.login"))+" ")]),n("div",{staticClass:"navbar-item has-dropdown is-hoverable"},[n("a",{staticClass:"navbar-link"},[e._v(" "+e._s(e._f("capitalize")(e.currentUILanguage))+" ")]),n("div",{staticClass:"navbar-dropdown is-right"},[n("a",{staticClass:"navbar-item",on:{click:function(t){return e.changeLanguage("fr")}}},[e._v(" FR ")]),n("a",{staticClass:"navbar-item",on:{click:function(t){return e.changeLanguage("en")}}},[e._v(" EN ")])])])],1)])])},J=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"navbar-brand"},[a("a",{staticClass:"navbar-item",attrs:{href:"#"}},[a("img",{attrs:{src:n("5365")}})]),a("a",{staticClass:"navbar-burger burger",attrs:{role:"button","aria-label":"menu","aria-expanded":"false","data-target":"navbarBasicExample"}},[a("span",{attrs:{"aria-hidden":"true"}}),a("span",{attrs:{"aria-hidden":"true"}}),a("span",{attrs:{"aria-hidden":"true"}})])])}],W={name:"Navbar",methods:Object(h["a"])(Object(h["a"])({},Object(S["c"])(["changeLocale","logout"])),{},{changeLanguage:function(e){this.changeLocale(e)},logoutHandler:function(){this.$toasted.show(this.$t("auth.not-authenticated.toast").toString(),{position:"bottom-center",duration:1500,type:"info"}),this.logout()}}),computed:Object(h["a"])({currentUILanguage:function(){return this.$store.state.locale}},Object(S["d"])(["isAuthenticated"])),filters:{capitalize:function(e){return e?(e=e.toString(),e.toUpperCase()):""}}},K=W,X=(n("40e6"),Object(I["a"])(K,Y,J,!1,null,"004a595e",null)),Z=X.exports,ee=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"btn-container"},[n("button",{staticClass:"btn",attrs:{id:"new-column",name:"new-column","aria-label":"Add new column"},on:{click:e.search}},[n("i",{staticClass:"UI-icon UI-plus"}),e._v(" "+e._s(e.$t("deck.add-column"))+" ")])])},te=[],ne={name:"AddColumn",methods:Object(h["a"])(Object(h["a"])({},Object(S["e"])(["addColumn"])),{},{search:function(){"deck"!==this.$route.name&&this.$router.push({name:"deck"}),this.addColumn()}})},ae=ne,re=(n("da65"),Object(I["a"])(ae,ee,te,!1,null,"1ca59738",null)),oe=re.exports,ie=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition-group",{attrs:{id:"sidebar",name:"appear",tag:"nav",appear:""}},[n("button",{key:"new-column",staticClass:"btn btn-circle btn-icon",attrs:{name:"new-column","aria-label":"Add new column"},on:{click:e.search}},[n("i",{staticClass:"UI-icon UI-plus"})])])},se=[],ce={name:"SideBar",methods:Object(h["a"])(Object(h["a"])({},Object(S["e"])(["addColumn"])),{},{search:function(){"deck"!==this.$route.name&&this.$router.push({name:"deck"}),this.addColumn()}})},ue=ce,le=(n("ada6"),Object(I["a"])(ue,ie,se,!1,null,"a70769d0",null)),de=le.exports,me={name:"AutoRefreshVisibility",mounted:function(){this.visibilityChanged(),document.addEventListener("visibilitychange",this.visibilityChanged,!1)},beforeDestroy:function(){document.removeEventListener("visibilitychange",this.visibilityChanged,!1)},methods:Object(h["a"])(Object(h["a"])({},Object(S["c"])(["refreshAllColumns"])),{},{visibilityChanged:function(){!0!==document.hidden&&(this.$root.$now=new Date,!1!==navigator.onLine&&this.refreshAllColumns())}})},pe={name:"AutoRefreshTimer",data:function(){return{autoRefreshTimer:null,autoRefreshDelay:1e4}},mounted:function(){this.startAutoRefresh()},beforeDestroy:function(){this.stopAutoRefresh()},methods:{startAutoRefresh:function(){var e=this;this.autoRefreshTimer=window.setInterval(Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!0!==document.hidden){t.next=2;break}return t.abrupt("return");case 2:if(e.$root.$now=new Date,!1!==navigator.onLine){t.next=5;break}return t.abrupt("return");case 5:return t.next=7,e.refreshAllColumns();case 7:case"end":return t.stop()}}),t)}))),this.autoRefreshDelay)},stopAutoRefresh:function(){this.autoRefreshTimer&&clearInterval(this.autoRefreshTimer)}}},he=r["default"].extend({name:"Deck",metaInfo:{titleTemplate:function(e){return e?"".concat(e," | AFP Deck"):"AFP Deck"}},components:{Column:Q,AddColumn:oe,SideBar:de,Navbar:Z},mixins:[me,pe],computed:Object(h["a"])(Object(h["a"])({},Object(S["f"])(["authType","columns"])),Object(S["d"])(["isAuthenticated"])),watch:{authType:function(e,t){"credentials"!==e&&"credentials"===t&&this.$router.push({name:"login",query:{redirect:this.$route.path}})}}}),fe=he,ge=(n("b27f"),Object(I["a"])(fe,m,p,!1,null,"45417a3a",null)),ve=ge.exports;function be(e){return e.includes(" ")?'"'.concat(e,'"'):e}r["default"].use(d["a"]);var ye=[{name:"deck",path:"/",component:ve,meta:{analytics:{pageviewTemplate:function(e){return{title:"AFP Deck",page:e.path,location:window.location.href,dimension2:navigator.onLine.toString(),dimension3:c["a"].getters.isAuthenticated.toString()}}}},children:[{path:"doc",redirect:"/"},{name:"document",path:"doc/:docId",component:function(){return n.e("viewer").then(n.bind(null,"f9ca"))},props:!0,meta:{analytics:{pageviewTemplate:function(e){var t=c["a"].getters.getDocumentById(e.params.docId);if(t)return{title:t.headline,page:e.path,location:window.location.href,dimension1:t.product,dimension2:navigator.onLine.toString(),dimension3:c["a"].getters.isAuthenticated.toString()}}}}},{name:"slug",path:"slug/:slugs",beforeEnter:function(e,t,n){c["a"].commit("addColumn",{params:{query:e.params.slugs.split(",").map((function(e){return"slug:".concat(be(e))})).join(" AND ")}}),n({name:"deck"})}},{name:"place",path:"place/:country/:city?",beforeEnter:function(e,t,n){c["a"].commit("addColumn",{params:{query:e.params.city?"country:".concat(be(e.params.country)," AND city:").concat(be(e.params.city)):"country:".concat(be(e.params.country))}}),n({name:"deck"})}},{name:"genre",path:"genre/:genre",beforeEnter:function(e,t,n){c["a"].commit("addColumn",{params:{query:"genre:".concat(be(e.params.genre))}}),n({name:"deck"})}},{name:"event",path:"event/:event",beforeEnter:function(e,t,n){c["a"].commit("addColumn",{params:{query:'event:"afpevent:'.concat(e.params.event,'"')}}),n({name:"deck"})}},{name:"creator",path:"creator/:creator",beforeEnter:function(e,t,n){c["a"].commit("addColumn",{params:{query:"creator:".concat(be(e.params.creator))}}),n({name:"deck"})}},{name:"login",path:"login",component:function(){return n.e("login").then(n.bind(null,"a55b"))},meta:{analytics:{pageviewTemplate:function(e){return{title:"AFP Deck - Login",page:e.path,location:window.location.href,dimension2:navigator.onLine.toString(),dimension3:c["a"].getters.isAuthenticated.toString()}}}}},{name:"about",path:"about",component:function(){return n.e("about").then(n.bind(null,"f820"))},meta:{analytics:{pageviewTemplate:function(e){return{title:"AFP Deck - About",page:e.path,location:window.location.href,dimension2:navigator.onLine.toString(),dimension3:c["a"].getters.isAuthenticated.toString()}}}}}]}],we=new d["a"]({routes:ye});r["default"].use(l.a,{id:"UA-127064867-1",disabled:!0,router:we,autoTracking:{pageviewOnLoad:!0,exception:!0},debug:{enabled:!1,sendHitTask:!0},anonymizeIp:!0,forceSSL:!0});var Ce=n("fe0b"),ke=n("6591"),Ie=n("c8b5"),Oe=n.n(Ie);delete Oe.a.defaults.cssProps.userSelect,Oe.a.defaults.touchAction="pan-y",r["default"].use(ke["VueHammer"]);n("b814"),n("70cb");var xe=n("f2d6"),Se=n.n(xe);r["default"].use(Se.a);var je,Ae=new Se.a({useVuex:!0}),$e=n("9483");(Object($e["a"])("".concat("","sw.min.js"),{ready:function(){console.log("Service worker is active.")},registered:function(e){console.log("Service worker has been registered.")},cached:function(e){console.log("version has been cached for offline use.")},updatefound:function(e){console.log("New version is downloading.")},updated:function(e){console.log("New version is available; Ask for refresh."),r["default"].toasted.show("New version available !",{action:[{text:"Update",onClick:function(){e.waiting.postMessage({command:"skipWaiting"})}}],position:"bottom-right"})},offline:function(){r["default"].toasted.show("No internet connection found. App is running in offline mode.",{position:"bottom-center",duration:1500})},error:function(e){r["default"].toasted.global.error(e)}}),"serviceWorker"in navigator)&&navigator.serviceWorker.addEventListener("controllerchange",Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!je){e.next=2;break}return e.abrupt("return");case 2:c["a"].commit("clearDocuments"),Object(u["event"])("service-worker","controllerchange"),window.location.reload(),je=!0;case 6:case"end":return e.stop()}}),e)}))));function Pe(){return"serviceWorker"in navigator?navigator.serviceWorker.controller?"controlled":"supported":"unsupported"}Object(u["event"])("service-worker","support",Pe());var _e=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:{"night-mode":!e.useLightTheme},attrs:{id:"app"}},[n("router-view")],1)},De=[],Te=navigator.connection||navigator.mozConnection||navigator.webkitConnection,Ee={name:"CheckConnection",computed:Object(h["a"])({},Object(S["f"])(["isOnline"])),watch:{isOnline:function(e,t){!1===e?(this.$toasted.clear(),this.$toasted.show(this.$t("connectivity.messageOff"),{duration:null,type:"info",position:"bottom-center"})):!1===t&&(this.$toasted.clear(),this.$toasted.show(this.$t("connectivity.messageOn"),{duration:2e3,type:"info",position:"bottom-center"}))}},mounted:function(){if(!Te)return!1;this.checkConnection(),Te.addEventListener("change",this.checkConnection)},methods:Object(h["a"])(Object(h["a"])({},Object(S["e"])(["setConnectivityStatus"])),{},{checkConnection:function(){var e=!0===navigator.onLine;this.setConnectivityStatus(e)}})},Fe=n("e2b7"),Le={name:"NightMode",data:function(){return{useLightTheme:!0}},mounted:function(){this.checkDayNight(),document.addEventListener("visibilitychange",this.checkDayNight,!1)},beforeDestroy:function(){document.removeEventListener("visibilitychange",this.checkDayNight,!1)},methods:{checkDayNight:function(){try{var e=Object(Fe["a"])();if(e.error)throw new Error(e.error);this.useLightTheme=e.light}catch(n){console.error(n);var t=(new Date).getHours();this.useLightTheme=t>6&&t<20}}}},Re={name:"App",mixins:[Ee,Le]},Ne=Re,Be=(n("13a5"),n("4820"),Object(I["a"])(Ne,_e,De,!1,null,"7e3b9ef6",null)),Me=Be.exports;function Ve(){new r["default"]({router:we,store:c["a"],i18n:Ce["a"],wait:Ae,render:function(e){return e(Me)}}).$mount("#app"),"deck"!==we.currentRoute.name||c["a"].getters.isAuthenticated||we.replace({name:"login"}),c["a"].getters.isAuthenticated&&r["default"].$ga.enable()}r["default"].config.productionTip=!1,r["default"].config.errorHandler=function(e){r["default"].toasted.global.error(e)},r["default"].config.warnHandler=function(e){r["default"].toasted.global.warn(e)},we.beforeEach(function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t,n,a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("document"!==t.name){e.next=12;break}if(c["a"].getters.getDocumentById(t.params.docId)){e.next=12;break}return e.prev=2,e.next=5,c["a"].dispatch("getDocument",t.params.docId);case 5:e.next=12;break;case 7:if(e.prev=7,e.t0=e["catch"](2),"credentials"===c["a"].state.authType){e.next=11;break}return e.abrupt("return",a({name:"login",query:{redirect:"doc/".concat(t.params.docId)}}));case 11:return e.abrupt("return",a({name:"deck"}));case 12:a();case 13:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t,n,a){return e.apply(this,arguments)}}()),c["a"].dispatch("changeLocale",Ce["a"].locale),Object(c["b"])().then(Ve)},da65:function(e,t,n){"use strict";n("52b8")},dced:function(e,t,n){},edd4:function(e){e.exports=JSON.parse('{"back-to-home":"Back to home","submit":"Submit","loading":"Loading...","install-app":"Add to home screen","deck":{"add-column":"Add a new column"},"column":{"search":"Search...","product":"Select content","lang":"Document language","urgency":"Category of news story","until":"Until","no-result":"No result","delete":"Delete the column","refresh":"Refresh ?","documents-gap":"Since your last visit, you missed 1 document. | Since your last visit, you missed {count} documents."},"about":{"name":"About","title":"About AFP Deck","description":["AFP News Deck is a reader for AFP feeds. It allows you to find and read stories, multimedia articles and photos directly in your browser.","Made with love by the AFP Dataviz team, based on an original idea from the Medialab. Data is provided by the AFP Content API."],"version":"Version"},"auth":{"success":{"title":"You\'re logged in correctly.","description":"Enjoy AFP Deck !"},"login":"Login","logout":"Logout","clientId":"Client ID","clientSecret":"Client Secret","username":"Username","password":"Password","not-authenticated":{"title":"Log in to see the latest news","toast":"Good bye :)"},"cookies":"By continuing your navigation on this site, you consent to the use of anonymous cookies for statistical purposes.","warning-email":"Please use your username instead of your email address"},"products":{"all":"in all products","news":"in the news","multimedia":"in multimedia articles","photo":"in photos","infographie":"in graphics","videographie":"in videographics","video":"in videos"},"languages":{"all":"in all languages","en":"in english","fr":"in french","de":"in german","es":"in spanish","pt":"in portuguese","ar":"in arabic","zh-tw":"in traditionnal Chinese","zh-cn":"in simplified Chinese"},"urgencies":{"all":"All news stories","all-photos":"All photos","flash":"Only flashes","alertes":"include alerts","urgents":"include urgents","depeches":"All news stories","topshots":"Only topshots"},"topics":{"all":"All topics","a-la-une":"Top Stories","derniere-minute":"Breaking news","monde":"International news","us-news":"US News","us-politics":"US Politics","middle-east":"Middle East","asia-business":"Asia Business","business-tech":"Business and Tech","science-environment":"Science and Environment","health-lifestyle":"Health and Lifestyle","sport":"Sports","football":"Football","people":"People and Entertainment","documentation":"File","us-sports":"US Sports","uk-news":"UK News","south-asia-news":"South Asia News","offbeat":"Offbeat","cricket":"Cricket","olympics":"Olympics","lifestyle":"Lifestyle","photo-gallery":"Photo Gallery","videographics":"Videographics","video-gallery":"Video Gallery"},"connectivity":{"messageOff":"Your device is offline","messageOn":"You device is online again"},"dateTimeFormats":{"short":{"year":"numeric","month":"short","day":"numeric"},"long":{"year":"numeric","month":"short","day":"numeric","weekday":"short","hour":"numeric","minute":"numeric"}},"document":{"share":"Share","copied":"Copied in clipboard","read-more":"Full article:"}}')},f693:function(e){e.exports=JSON.parse('{"back-to-home":"Retour à l\'accueil","submit":"Valider","loading":"Chargement...","install-app":"Installer sur l\'écran d\'accueil","deck":{"add-column":"Ajouter une colonne"},"column":{"search":"Rechercher...","product":"Sélectionnez un produit","lang":"Sélectionnez une langue","urgency":"Sélectionnez une urgence","until":"Jusqu\'au","no-result":"Pas de résultats","delete":"Supprimer la colonne","refresh":"Rafraîchir ?","documents-gap":"Depuis votre dernière visite, vous avez manqué 1 document. | Depuis votre dernière visite, vous avez manqué {count} documents."},"about":{"name":"A propos","title":"À propos d\'AFP Deck","description":["AFP News Deck permet de lire les dépêches, photos et vidéos diffusées par l\'AFP, directement dans votre navigateur.","Conçu par l\'équipe Dataviz de l\'AFP, sur une idée originale du Médialab. Les données proviennent de l\'API AFP."],"version":"Version"},"auth":{"success":{"title":"Vous êtes authentifié","description":"Profitez d\'AFP Deck !"},"login":"Se connecter","logout":"Se déconnecter","clientId":"ID Client","clientSecret":"Secret Client","username":"Nom d\'utilisateur","password":"Mot de passe","not-authenticated":{"title":"Connectez-vous pour bénéficier des dernières nouvelles","toast":"À bientôt :)"},"cookies":"En poursuivant la navigation sur ce site, vous consentez à l\'utilisation de cookies anonymes à des fins statistiques.","warning-email":"SVP, utilisez votre nom d\'utilisateur et non votre adresse email"},"products":{"all":"dans tous les produits","news":"dans les dépêches","multimedia":"dans le fil multimédia","photo":"dans les photos","infographie":"dans les infographies","videographie":"dans les vidéographies","video":"dans les vidéos"},"languages":{"all":"dans toutes les langues","en":"en anglais","fr":"en français","de":"en allemand","es":"en espagnol","pt":"en portugais","ar":"en arabe","zh-tw":"en chinois traditionnel","zh-cn":"en chinois simplifié"},"urgencies":{"all":"Tout le contenu","all-photos":"Toutes les photos","flash":"Uniquement les flashs","alertes":"inclure les alertes","urgents":"inclure les urgents","depeches":"Tout le contenu","topshots":"Uniquement les topshots"},"topics":{"all":"Tous les sujets","a-la-une":"A la une","derniere-minute":"Dernière minute","monde":"Monde","afrique":"Afrique","politique":"Politique","faits-divers":"Faits divers","economie":"Economie","environnement":"Environnement","sport":"Sport","football":"Football","people":"People","insolite":"Insolite","medias":"Médias","sante":"Santé","mode-de-vie":"Modes de vie","art-de-vivre":"Art de vivre","documentation":"Documentation","galerie-photos":"Galerie photo","galerie-photos-insolites":"Photos insolites","videographies":"Vidéographies","videos-monde":"Vidéos monde","elections":"Elections","sciences":"Sciences","tech":"Technologies"},"connectivity":{"messageOff":"Votre appareil est hors connexion","messageOn":"Votre appareil est de nouveau connecté"},"dateTimeFormats":{"short":{"year":"numeric","month":"short","day":"numeric"},"long":{"year":"numeric","month":"short","day":"numeric","weekday":"short","hour":"numeric","minute":"numeric"}},"document":{"share":"Partager","copied":"Copié dans le presse-papier","read-more":"Article complet :"}}')},fca5:function(e,t,n){var a={"./en":"edd4","./en.json":"edd4","./fr":"f693","./fr.json":"f693"};function r(e){var t=o(e);return n(t)}function o(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}r.keys=function(){return Object.keys(a)},r.resolve=o,e.exports=r,r.id="fca5"},fe0b:function(e,t,n){"use strict";n.d(t,"b",(function(){return f}));n("caad"),n("d3b7");var a=n("15fd"),r=(n("96cf"),n("1da1")),o=n("ade3"),i=n("2b0e"),s=n("a925");i["default"].use(s["a"]);var c=["en","fr"],u=c[0],l=Object(o["a"])({},u,n("fca5")("./".concat(u))),d=Object(o["a"])({},u,l[u].dateTimeFormats);function m(){var e=navigator.language&&navigator.language.substring(0,2);return!(!e||!c.includes(e))&&e}var p=new s["a"]({locale:m()||u,fallbackLocale:u,messages:l,dateTimeFormats:d});function h(e){p.locale=e;var t=document.querySelector("html");return t&&t.setAttribute("lang",e),e}function f(e){return g.apply(this,arguments)}function g(){return g=Object(r["a"])(regeneratorRuntime.mark((function e(t){var r,o,i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(p.locale===t&&p.messages[t]){e.next=8;break}return e.next=3,n("39c3")("./".concat(t,".json"));case 3:return r=e.sent,o=r.default,i=o.dateTimeFormats,s=Object(a["a"])(o,["dateTimeFormats"]),p.setLocaleMessage(t,s),p.setDateTimeFormat(t,i),e.abrupt("return",h(t));case 8:return e.abrupt("return",h(t));case 9:case"end":return e.stop()}}),e)}))),g.apply(this,arguments)}t["a"]=p}});
//# sourceMappingURL=app-legacy.163defc7.js.map