(function(e){function t(t){for(var s,a,c=t[0],u=t[1],d=t[2],p=t[3]||[],h=0,f=[];h<c.length;h++)a=c[h],o[a]&&f.push(o[a][0]),o[a]=0;for(s in u)Object.prototype.hasOwnProperty.call(u,s)&&(e[s]=u[s]);m&&m(t);var g=document.getElementsByTagName("head")[0];p.forEach(function(e){if(void 0===o[e]){o[e]=null;var t=document.createElement("link");l.nc&&t.setAttribute("nonce",l.nc),t.rel="prefetch",t.as="script",t.href=r(e),g.appendChild(t)}});while(f.length)f.shift()();return i.push.apply(i,d||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],s=!0,a=1;a<n.length;a++){var r=n[a];0!==o[r]&&(s=!1)}s&&(i.splice(t--,1),e=l(l.s=n[0]))}return e}var s={},a={app:0},o={app:0},i=[];function r(e){return l.p+"js/"+({about:"about","browser-warning":"browser-warning",login:"login",tour:"tour",viewer:"viewer"}[e]||e)+"."+{about:"c88ec48a","browser-warning":"8721a43c",login:"05d35dd6",tour:"cd37c3eb",viewer:"3f01dc47"}[e]+".js"}function l(t){if(s[t])return s[t].exports;var n=s[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,l),n.l=!0,n.exports}l.e=function(e){var t=[],n={about:1,"browser-warning":1,login:1,tour:1,viewer:1};a[e]?t.push(a[e]):0!==a[e]&&n[e]&&t.push(a[e]=new Promise(function(t,n){for(var s="css/"+({about:"about","browser-warning":"browser-warning",login:"login",tour:"tour",viewer:"viewer"}[e]||e)+"."+{about:"a6627b45","browser-warning":"0d425b9f",login:"92e3764f",tour:"70bf15b6",viewer:"5ddf23a2"}[e]+".css",o=l.p+s,i=document.getElementsByTagName("link"),r=0;r<i.length;r++){var c=i[r],u=c.getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(u===s||u===o))return t()}var d=document.getElementsByTagName("style");for(r=0;r<d.length;r++){c=d[r],u=c.getAttribute("data-href");if(u===s||u===o)return t()}var m=document.createElement("link");m.rel="stylesheet",m.type="text/css",m.onload=t,m.onerror=function(t){var s=t&&t.target&&t.target.src||o,i=new Error("Loading CSS chunk "+e+" failed.\n("+s+")");i.request=s,delete a[e],m.parentNode.removeChild(m),n(i)},m.href=o;var p=document.getElementsByTagName("head")[0];p.appendChild(m)}).then(function(){a[e]=0}));var s=o[e];if(0!==s)if(s)t.push(s[2]);else{var i=new Promise(function(t,n){s=o[e]=[t,n]});t.push(s[2]=i);var c,u=document.getElementsByTagName("head")[0],d=document.createElement("script");d.charset="utf-8",d.timeout=120,l.nc&&d.setAttribute("nonce",l.nc),d.src=r(e),c=function(t){d.onerror=d.onload=null,clearTimeout(m);var n=o[e];if(0!==n){if(n){var s=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src,i=new Error("Loading chunk "+e+" failed.\n("+s+": "+a+")");i.type=s,i.request=a,n[1](i)}o[e]=void 0}};var m=setTimeout(function(){c({type:"timeout",target:d})},12e4);d.onerror=d.onload=c,u.appendChild(d)}return Promise.all(t)},l.m=e,l.c=s,l.d=function(e,t,n){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(l.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)l.d(n,s,function(t){return e[t]}.bind(null,s));return n},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="",l.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],u=c.push.bind(c);c.push=t,c=c.slice();for(var d=0;d<c.length;d++)t(c[d]);var m=u;t([[],{},0,["about","login","viewer"]]),i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"08cd":function(e,t,n){"use strict";var s=n("6a75"),a=n.n(s);a.a},1126:function(e,t,n){},"13a5":function(e,t,n){"use strict";var s=n("1472"),a=n.n(s);a.a},1472:function(e,t,n){},"1fc4":function(e,t,n){"use strict";var s=n("4f17"),a=n.n(s);a.a},"357c":function(e,t,n){},"39c3":function(e,t,n){var s={"./en.json":["edd4"],"./fr.json":["f693"]};function a(e){var t=s[e];return t?Promise.all(t.slice(1).map(n.e)).then(function(){var e=t[0];return n.t(e,3)}):Promise.resolve().then(function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t})}a.keys=function(){return Object.keys(s)},a.id="39c3",e.exports=a},"3b81":function(e,t,n){},4360:function(e,t,n){"use strict";n("ac6a");var s=n("2b0e"),a=n("2f62"),o=()=>({columns:[],credentials:{client:null,clientId:null,clientSecret:null},documents:{},viewed:[],authType:"unknown",connectivity:{isConnected:!0},wantTour:!0,displayInstallApp:!1,locale:Object({NODE_ENV:"production",BASE_URL:""}).VUE_APP_I18N_LOCALE||"en"}),i={getDocumentById:e=>t=>{return e.documents[t]},getColumnByIndex:e=>t=>{return e.columns[t]},getDocumentsIdsByColumnId:(e,t)=>(function(e){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return t.getColumnByIndex(e).documentsIds.filter(e=>n||"string"===typeof e)}),getDocumentsByColumnId:(e,t)=>(function(e){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return t.getDocumentsIdsByColumnId(e,n).map(e=>t.getDocumentById(e))}),isDocumentViewed:e=>t=>{return e.viewed.includes(t)},isAnonymous(e){return"anonymous"===e.authType},isAuthenticated(e){return"credentials"===e.authType},getPreviousDocumentIdInColById:(e,t)=>(e,n)=>{if(null===e||void 0===n)return!1;const s=t.getDocumentsByColumnId(e,!1),a=s.findIndex(e=>e.uno===n),o=s[a+1];return o&&o.uno||!1},getNextDocumentIdInColById:(e,t)=>(e,n)=>{if(null===e||void 0===n)return!1;const s=t.getDocumentsByColumnId(e,!1),a=s.findIndex(e=>e.uno===n),o=s[a-1];return o&&o.uno||!1}},r=n("be94"),l=n("f426");class c extends l["a"]{constructor(){super(...arguments),this.clients=["afpdeck","other"]}get client(){return this._client}set client(e){this._client=e}get authUrl(){return this.client?`https://3o3qoiah2e.execute-api.eu-central-1.amazonaws.com/${this.client}`:super.authUrl}get apiKey(){return this._apiKey}set apiKey(e){let t=e.client,n=e.clientId,s=e.clientSecret;t&&"other"!==t?(this._apiKey="unset",this.client=t):n&&s?(super.apiKey={clientId:n,clientSecret:s},delete this._client):(delete this._client,delete this._apiKey)}get authorizationBasicHeaders(){return this.client?{}:super.authorizationBasicHeaders}saveToken(e){P.commit("setToken",e)}}var u=new c,d=n("c64e"),m=n.n(d),p=n("5be3"),h={addColumn(e,t){const n={id:m()(),params:Object.assign({},u.defaultSearchParams,{products:[],size:10}),documentsIds:[],error:!1};t&&t.params&&(t.params=Object.assign(n.params,t.params));const s=Object.assign({},n,t);e.columns.find(e=>e.id===s.id)||e.columns.push(s)},moveColumn(e,t){let n=t.indexCol,s=t.dir;const a="left"===s?n-1:n+1,o=e.columns[n];e.columns.splice(n,1),e.columns.splice(a,0,o)},closeColumn(e,t){let n=t.indexCol;e.columns.splice(n,1)},resetColumn(e,t){let n=t.indexCol;e.columns[n].documentsIds=[]},updateColumnParams(e,t){let n=t.indexCol,s=t.params;e.columns[n].params=s},setClient(e,t){e.credentials.client=t},setClientId(e,t){e.credentials.clientId=t},setClientSecret(e,t){e.credentials.clientSecret=t},resetClientCredentials(e){e.credentials.client=null,e.credentials.clientId=null,e.credentials.clientSecret=null},setToken(e,t){e.authType=t.authType},unsetToken(e){e.authType="unknown"},setError(e,t){let n=t.indexCol,s=t.value;if(!e.columns[n])return!1;e.columns[n].error=s},addDocuments(e,t){const n=t.reduce((e,t)=>{return e[t.uno]=t.parsed?t:new p["a"](t).toObject(),e},{});e.documents=Object.freeze(Object.assign({},n,e.documents))},clearDocuments(e){e.columns=e.columns.map(e=>Object(r["a"])({},e,{documentsIds:[]})),e.documents={}},prependDocumentsIdsToCol(e,t){let n=t.indexCol,s=t.documentsIds;if(!e.columns[n])return!1;const a=e.columns[n].documentsIds;e.columns[n].documentsIds=[...new Set(s.concat(a))]},appendDocumentsIdsToCol(e,t){let n=t.indexCol,s=t.documentsIds;if(!e.columns[n])return!1;const a=e.columns[n].documentsIds;e.columns[n].documentsIds=[...new Set(a.concat(s))]},setViewed(e,t){e.viewed=t},setDocumentViewed(e,t){e.viewed.push(t)},setConnectivityStatus(e,t){let n=t.isConnected;e.connectivity.isConnected=n},setWantTour(e,t){e.wantTour=t},setLocale(e,t){e.locale=t},resetState(e){Object.assign(e,o())},displayInstallApp(e,t){e.displayInstallApp=t}},f=(n("386d"),n("d3a4")),g=n("707c"),v={async changeLocale(e,t){let n=e.commit;e.state;await Object(f["b"])(t),Object(g["a"])(t),n("setLocale",t)},logout(e){let t=e.commit,n=e.dispatch;t("resetClientCredentials"),t("unsetToken"),t("clearDocuments"),n("refreshAllColumns")},async authenticate(e){e.state;let t=e.commit,n=e.dispatch,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=s.username,o=s.password;try{await u.authenticate({username:a,password:o}),t("clearDocuments"),n("refreshAllColumns",{more:"before"})}catch(i){return console.error(i&&i.message),Promise.reject(i)}},async searchDocuments(e,t){e.state;let n=e.commit,s=e.dispatch;e.getters;try{s("wait/start","documents.search",{root:!0});const e=await u.search(t),o=e.documents;return n("addDocuments",o),o}catch(a){return a.response?(401===a.response.status&&(await s("logout"),console.error("Authentication error. Please type your credentials.")),console.error(a.response)):a.request&&console.error(a.request),!1}finally{s("wait/end","documents.search",{root:!0})}},async refreshColumn(e,t){let n=e.state,s=e.commit,a=e.dispatch,o=e.getters,i=e.rootGetters,l=t.indexCol,c=t.more;if(!i["wait/is"](`column.refreshing.${n.columns[l].id}`))try{a("wait/start",`column.refreshing.${n.columns[l].id}`,{root:!0});let e=Object(r["a"])({},o.getColumnByIndex(l).params);try{if(o.getColumnByIndex(l).documentsIds.length>0)switch(c){case"before":const t=o.getDocumentsIdsByColumnId(l).filter(e=>"string"===typeof e).slice(-1).pop(),n=o.getDocumentById(t),s=new Date(n.published);s.setSeconds(s.getSeconds()-1),e=Object.assign(e,{dateTo:s.toISOString()});break;case"after":const a=o.getDocumentsIdsByColumnId(l).filter(e=>"string"===typeof e)[0],i=o.getDocumentById(a),r=new Date(i.published);r.setSeconds(r.getSeconds()+1),e=Object.assign(e,{dateFrom:r.toISOString()});break;default:}}catch(d){return console.error(d.message),s("resetColumn",{indexCol:l}),a("refreshColumn",{indexCol:l,more:c})}const t=await u.search(e),i=t.documents,p=t.count;if(!i||0===i.length)return!1;s("addDocuments",i);const h=i.map(e=>e.uno);switch(c){case"before":s("appendDocumentsIdsToCol",{indexCol:l,documentsIds:h});break;case"after":p>i.length&&h.push({type:"documents-gap",count:p-i.length}),s("prependDocumentsIdsToCol",{indexCol:l,documentsIds:h});break;default:}return n.columns[l].error&&s("setError",{indexCol:l,value:!1}),!0}catch(m){return void(m.response?(401===m.response.status&&(await a("logout"),console.error("Authentication error. Please type your credentials.")),console.error(m.response)):m.request&&console.error(m.request))}finally{a("wait/end",`column.refreshing.${n.columns[l].id}`,{root:!0})}},refreshAllColumns(e){let t=e.state,n=e.dispatch,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=s.more,o=void 0===a?"after":a;return Promise.all(t.columns.map((e,t)=>n("refreshColumn",{indexCol:t,more:o})))},async getDocument(e,t){let n=e.commit;e.dispatch;const s=await u.get(t);if(!s.document)throw new Error("No document found");n("addDocuments",[s.document])}},b=n("3835"),y=n("a002"),w=n.n(y);const C={columns:"afpnews-deck-columns",token:"afpnews-deck-token",client:"afpnews-deck-client",clientId:"afpnews-deck-client-id",clientSecret:"afpnews-deck-client-secret",autoRefresh:"afpnews-deck-auto-refresh",wantTour:"afpnews-deck-want-tour",locale:"afpnews-deck-locale",viewed:"afpnews-deck-viewed"},I=w.a.createInstance({name:"userStore"}),A=w.a.createInstance({name:"documentsStore"}),k=async e=>{await Promise.all([C.client,C.clientId,C.clientSecret,C.token].map(e=>I.getItem(e))).then(t=>{let n=Object(b["a"])(t,4),s=n[0],a=n[1],o=n[2],i=n[3];null!==s&&e.commit("setClient",s),null!==a&&e.commit("setClientId",a),null!==o&&e.commit("setClientSecret",o),u.apiKey=e.state.credentials,i&&(e.commit("setToken",i),u.token=i)})},x=e=>{e.subscribe((e,t)=>{let n=e.type,s=e.payload;switch(n){case"setToken":"credentials"===s.authType?(u.token=s,I.setItem(C.token,s)):I.removeItem(C.token);break;case"unsetToken":u.resetToken(),I.removeItem(C.token);break;case"setClient":u.apiKey=t.credentials,I.setItem(C.client,s);break;case"setClientId":u.apiKey=t.credentials,I.setItem(C.clientId,s);break;case"setClientSecret":u.apiKey=t.credentials,I.setItem(C.clientSecret,s);break;case"resetClientCredentials":u.apiKey=t.credentials,I.setItem(C.client,t.credentials.client),I.setItem(C.clientId,t.credentials.clientId),I.setItem(C.clientSecret,t.credentials.clientSecret);break;default:}})},_=async e=>{await Promise.all([C.wantTour,C.locale,C.columns,C.viewed].map(e=>I.getItem(e))).then(t=>{let n=Object(b["a"])(t,4),s=n[0],a=n[1],o=n[2],i=n[3];null!==s&&e.commit("setWantTour",s),null!==a&&e.dispatch("changeLocale",a),null!==i&&e.commit("setViewed",i),Array.isArray(o)&&o.length>0?o.forEach(t=>e.commit("addColumn",t)):e.commit("addColumn")});const t=[];await A.iterate((e,n,s)=>{t.push(e)}),t.length>0&&e.commit("addDocuments",t)},T=e=>{e.subscribe((t,n)=>{let s=t.type,a=t.payload;switch(s){case"setLocale":I.setItem(C.locale,a);break;case"addColumn":case"moveColumn":case"updateColumnParams":case"appendDocumentsIdsToCol":case"prependDocumentsIdsToCol":I.setItem(C.columns,n.columns);break;case"closeColumn":case"resetColumn":const t=[].concat.apply([],n.columns.map(e=>e.documentsIds));A.iterate((e,n,s)=>{t.includes(n)||A.removeItem(n)}),I.setItem(C.columns,n.columns);break;case"setWantTour":I.setItem(C.wantTour,a);break;case"setDocumentViewed":I.setItem(C.viewed,[...new Set(n.viewed)]);break;case"resetState":I.clear(),A.clear(),e.commit("addColumn");break;case"clearDocuments":A.clear(),I.setItem(C.columns,n.columns);break;case"addDocuments":Promise.all(a.map(e=>A.setItem(e.uno,e)));break;default:}})},S=e=>{e.subscribe(async(e,t)=>{let n=e.type;e.payload;switch(n){case"addColumn":await s["default"].nextTick();const e=document.querySelector(".column:last-of-type");e&&e.scrollIntoView({behavior:"smooth",block:"center"});break;default:}})};n.d(t,"b",function(){return $}),s["default"].use(a["a"]);const O=new a["a"].Store({state:o(),getters:i,mutations:h,actions:v,modules:{},plugins:[x,T,S],strict:!1});var P=t["a"]=O;const $=async()=>{await Promise.all([k(O),_(O)])}},"4e71":function(e,t,n){"use strict";var s=n("0284"),a=n("4360");let o;window.addEventListener("beforeinstallprompt",e=>{o=e,a["a"].commit("displayInstallApp",!0),e.userChoice.then(e=>{"accepted"===e.outcome&&a["a"].commit("displayInstallApp",!1),Object(s["event"])("pwa","installation",e.outcome)})}),window.addEventListener("appinstalled",e=>{Object(s["event"])("pwa","installation","installed")}),t["a"]=(()=>{o.prompt()})},"4f17":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);var s=n("2b0e"),a=n("0a89"),o=n.n(a);s["default"].use(o.a);n("28a5"),n("6b54");var i=n("8c4f"),r=n("4360"),l=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("main",[n("transition-group",{attrs:{id:"columns",name:"list",tag:"div"}},[e._l(e.columns,function(e,t){return n("column",{key:"column-"+e.id,attrs:{"column-id":t}})}),n("add-column",{key:"add-column"})],2),n("side-bar"),n("router-view")],1)},c=[],u=n("be94"),d=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"column"},[n("header",[e.paramsOpen||"tour"===e.$route.name?n("div",{staticClass:"actions"},[n("button",{staticClass:"btn btn-icon",attrs:{name:"move-left","aria-label":"Move column to left"},on:{click:function(t){e.move("left")}}},[n("i",{staticClass:"UI-icon UI-navigate-left"})]),n("button",{staticClass:"btn btn-icon margin-right-auto",attrs:{name:"move-right","aria-label":"Move column to right"},on:{click:function(t){e.move("right")}}},[n("i",{staticClass:"UI-icon UI-navigate-right"})]),n("button",{staticClass:"btn btn-icon",attrs:{name:"close-params","aria-label":"Close column params"},on:{click:e.closeParams}},[n("i",{staticClass:"UI-icon UI-collapse"})])]):e._e(),n("div",{staticClass:"form-group inpt-icon"},[n("input",{directives:[{name:"model",rawName:"v-model.lazy",value:e.query,expression:"query",modifiers:{lazy:!0}}],ref:"search",staticClass:"search inpt inpt-large",attrs:{placeholder:e.$t("column.search"),"aria-label":e.$t("column.search"),type:!0===e.paramsOpen?"search":"text",autocomplete:"off",name:"query"},domProps:{value:e.query},on:{focus:function(t){!1===e.paramsOpen&&(e.paramsOpen=!0)},change:function(t){e.query=t.target.value}}}),!1===e.paramsOpen?n("button",{staticClass:"btn btn-icon",attrs:{name:"expand","aria-label":"Open column params"},on:{click:function(t){e.paramsOpen=!0}}},[n("i",{staticClass:"UI-icon UI-expand icon-small"})]):e._e()]),n("transition-group",{staticClass:"form",attrs:{name:"curtain",tabindex:"-1",tag:"div"}},[e.paramsOpen||"tour"===e.$route.name?n("select",{directives:[{name:"model",rawName:"v-model",value:e.product,expression:"product"}],key:"product",staticClass:"slct slct-large",attrs:{name:"product","aria-label":"Select a product"},on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.product=t.target.multiple?n:n[0]}}},e._l(e.products,function(t){return n("option",{key:t.value.join("|"),attrs:{disabled:t.disabled},domProps:{value:t.value}},[e._v("\n          "+e._s(t.label)+"\n        ")])}),0):e._e(),e.paramsOpen||"tour"===e.$route.name?n("select",{directives:[{name:"show",rawName:"v-show",value:e.languages.length>1||"tour"===e.$route.name,expression:"languages.length > 1 || $route.name === 'tour'"},{name:"model",rawName:"v-model",value:e.lang,expression:"lang"}],key:"lang",staticClass:"slct slct-large",attrs:{name:"lang","aria-label":"Select a language"},on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.lang=t.target.multiple?n:n[0]}}},e._l(e.languages,function(t){return n("option",{key:t.value.join("|"),attrs:{disabled:t.disabled},domProps:{value:t.value}},[e._v("\n          "+e._s(t.label)+"\n        ")])}),0):e._e(),e.paramsOpen||"tour"===e.$route.name?n("select",{directives:[{name:"show",rawName:"v-show",value:e.urgencies.length>1||"tour"===e.$route.name,expression:"urgencies.length > 1 || $route.name === 'tour'"},{name:"model",rawName:"v-model",value:e.urgency,expression:"urgency"}],key:"urgency",staticClass:"slct slct-large",attrs:{name:"urgency","aria-label":"Select an urgency"},on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.urgency=t.target.multiple?n:n[0]}}},e._l(e.urgencies,function(t){return n("option",{key:t.value.join("|"),attrs:{disabled:t.disabled},domProps:{value:t.value}},[e._v("\n          "+e._s(t.label)+"\n        ")])}),0):e._e(),e.paramsOpen||"tour"===e.$route.name?n("datepicker",{key:"datepicker",attrs:{inline:!1,"monday-first":!0,"clear-button":!0,typeable:!0,"use-utc":!0,"disabled-dates":{from:new Date,to:new Date(2013,6,16)},placeholder:e.$t("column.until"),language:e.datePickerTranslate,"aria-label":"Select a date",name:"date-picker"},model:{value:e.dateTo,callback:function(t){e.dateTo=t},expression:"dateTo"}}):e._e(),e.paramsOpen||"tour"===e.$route.name?n("button",{key:"close",staticClass:"btn btn-large danger",attrs:{name:"close","aria-label":"Delete the column"},on:{click:e.close}},[e._v("\n        "+e._s(e.$t("column.delete"))+"\n      ")]):e._e()],1)],1),n("recyclist",{ref:"recyclist",staticClass:"documents",attrs:{list:e.documents,size:10,offset:200,"is-loading":e.$wait.is("column.refreshing."+e.column.id),"no-more":e.noMore},on:{"load-top":e.loadAfter,"load-bottom":e.loadBefore},scopedSlots:e._u([{key:"tombstone",fn:function(e){return[n("content-placeholders",{staticClass:"tombstone",attrs:{animated:!0,rounded:!0,centered:!1}},[n("content-placeholders-heading",{attrs:{img:!1}}),n("content-placeholders-img"),n("content-placeholders-text",{attrs:{lines:2}})],1)]}},{key:"item",fn:function(t){var s=t.data;return[s&&"documents-gap"===s.type?n("div",{staticClass:"documents-gap"},[n("p",[e._v("\n          "+e._s(e.$t("column.documents-gap",{count:s.count}))+"\n          "),n("router-link",{attrs:{to:"/"},nativeOn:{click:function(t){return e.reset(t)}}},[e._v("\n            "+e._s(e.$t("column.refresh"))+"\n          ")])],1)]):"string"===typeof s?n("card",{attrs:{"doc-id":s,"index-col":e.columnId}}):e._e()]}}])},[n("div",{attrs:{slot:"nomore"},slot:"nomore"},[e._v(e._s(e.$t("column.no-result")))])])],1)},m=[],p=(n("386d"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"vue-recyclist"},[n("div",{ref:"list",staticClass:"vue-recyclist-items",style:{height:e.height+"px"}},[e._l(e.visibleItems,function(t,s){return n("div",{directives:[{name:"show",rawName:"v-show",value:e.height>0,expression:"height > 0"}],key:s,staticClass:"vue-recyclist-item",style:{transform:"translate3d(0,"+t.top+"px,0)"}},[t.data?e._t("item",null,{data:t.data}):e._t("tombstone")],2)}),n("div",{staticClass:"vue-recyclist-pool"},[e._l(e.poolItems,function(t,s){return n("div",{key:s,ref:t.data.type||t.data,refInFor:!0,staticClass:"vue-recyclist-item"},[e._t("item",null,{data:t.data})],2)}),0===e.tombHeight?n("div",{ref:"tomb",staticClass:"vue-recyclist-item"},[e._t("tombstone")],2):e._e()],2)],2),!e.isLoading&&e.noMore?n("div",{staticClass:"vue-recyclist-nomore"},[e._t("nomore",[n("div",[e._v("End of list")])])],2):e._e()])}),h=[],f=(n("ac6a"),n("0342")),g=n.n(f);const v=[new g.a("Poppins",{weight:400,style:"normal",stretch:"normal"}),new g.a("Poppins",{weight:600,style:"normal",stretch:"normal"})];var b=()=>Promise.all(v.map(e=>e.load())),y={name:"Recyclist",props:{list:{type:Array,required:!0},size:{type:Number,default:20},offset:{type:Number,default:200},isLoading:{type:Boolean,default:!1},noMore:{type:Boolean,default:!1}},data(){return{items:[],height:0,start:0,containerHeight:0,tombHeight:0}},computed:{visibleItems(){return this.items.slice(Math.max(0,this.start-this.size),Math.min(this.items.length,this.start+this.size))},poolItems(){return this.items.filter(e=>e.data&&!1===e.gotHeight)}},watch:{start(e,t){0===e&&t>e&&this.$emit("loadTop")},list(){this.loadList()},noMore(e){!0===e&&(this.items=this.items.filter(e=>e.data),this.updateItemTop())}},mounted(){this.$el.addEventListener("scroll",this.onScroll,{capture:!0,passive:!0}),this.tombHeight=this.$refs.tomb&&this.$refs.tomb.offsetHeight,this.containerHeight=this.$el&&this.$el.offsetHeight||0,this.list.length>0?this.loadList():this.loadMoreItems()},destroyed(){this.$el.removeEventListener("scroll",this.onScroll)},methods:{async reset(){this.items=[],this.height=this.start=this.$el.scrollTop=0,await this.$nextTick(),this.loadMoreItems()},async loadList(){this.items=this.list.map(this.renderItem),await b(),await this.$nextTick();for(let e=0;e<this.items.length;e++)this.updateItemHeight(e);this.updateItemTop()},async loadMoreItems(){if(this.noMore)return!1;const e=this.items.length+this.size;for(let t=this.items.length;t<e;t++)this.setItem(t,null);this.updateItemTop(),this.$emit("load-bottom")},setItem(e,t){this.$set(this.items,e,this.renderItem(t))},renderItem(e){return{data:e,top:0,height:this.tombHeight,gotHeight:!1}},updateItemTop(){this.height=0;for(let e=0;e<this.items.length;e++){const t=this.items[e-1];this.$set(this.items[e],"top",t?t.top+t.height:0),this.height+=this.items[e].height}this.updateIndex()},updateIndex(){const e=this.$el.scrollTop;for(let t=0;t<this.items.length;t++)if(this.items[t].top>e){this.start=Math.max(0,t-1);break}},updateItemHeight(e){const t=this.items[e];if(!t.data)return;const n=this.$refs[t.data&&t.data.type||t.data];n&&n[0]&&(this.$set(this.items[e],"height",n[0].offsetHeight),this.$set(this.items[e],"gotHeight",!0))},onScroll(){this.$el.scrollTop+this.$el.offsetHeight>this.height-this.offset&&this.loadMoreItems(),this.updateIndex()}}},w=y,C=(n("b10e"),n("2877")),I=Object(C["a"])(w,p,h,!1,null,"ff92cb36",null);I.options.__file="Recyclist.vue";var A=I.exports,k=n("967d"),x=n("ae8d"),_=n("2f62"),T=n("fa33"),S=n("2430"),O={name:"AutoRefreshTimer",data(){return{autoRefreshTimer:null,autoRefreshDelay:1e4}},mounted(){this.startAutoRefresh()},beforeDestroy(){this.stopAutoRefresh()},methods:{startAutoRefresh(){this.autoRefreshTimer=setInterval(()=>{!0!==document.hidden&&!1!==navigator.onLine&&this.refreshColumn({indexCol:this.columnId,more:"after"})},this.autoRefreshDelay)},stopAutoRefresh(){this.autoRefreshTimer&&clearInterval(this.autoRefreshTimer)}}};const P={en:S["a"],fr:S["b"]};var $={name:"Column",components:{Card:x["a"],Recyclist:A,Datepicker:T["a"],ContentPlaceholders:k["ContentPlaceholders"],ContentPlaceholdersHeading:k["ContentPlaceholdersHeading"],ContentPlaceholdersImg:k["ContentPlaceholdersImg"],ContentPlaceholdersText:k["ContentPlaceholdersText"]},mixins:[O],props:{columnId:{type:Number,required:!0}},data(){return{paramsOpen:!1,noMore:!1}},computed:Object(u["a"])({},Object(_["c"])(["getColumnByIndex","getDocumentsIdsByColumnId","isAuthenticated"]),{datePickerTranslate(){return P[this.$i18n.locale]||P[this.$i18n.fallbackLocale]},column(){return this.getColumnByIndex(this.columnId)},documents(){return this.getDocumentsIdsByColumnId(this.columnId)},params(){return this.column.params},product:{get(){return this.params.products},set(e){if(!e[1]){if("photo"===e[0])return this.updateParams({products:e,langs:["en"],urgencies:[1,2,3,4,5]}),!0;if("news"===e[0])return this.updateParams({products:e,urgencies:[1,2,3,4]}),!0}this.updateParams({products:e,urgencies:[1,2,3,4,5]})}},lang:{get(){return this.params.langs},set(e){this.updateParams({langs:e})}},products(){return[{label:this.$t("products.all"),value:[],disabled:!this.isAuthenticated},{label:this.$t("products.news"),value:["news"],disabled:!this.isAuthenticated},{label:this.$t("products.multimedia"),value:["multimedia"],disabled:!1},{label:this.$t("products.photo"),value:["photo"],disabled:!this.isAuthenticated},{label:this.$t("products.video"),value:["sidtv","parismode","afptvweb","afptv1st"],disabled:!this.isAuthenticated},{label:this.$t("products.infographie"),value:["infographie"],disabled:!this.isAuthenticated},{label:this.$t("products.videographie"),value:["videographie"],disabled:!this.isAuthenticated}]},languages(){return 1===this.product.length&&"photo"===this.product[0]?[{label:this.$t("languages.en"),value:["en"],disabled:!1}]:[{label:this.$t("languages.all"),value:["fr","en","es","de","pt","ar","zh-tw","zh-cn"],disabled:!1},{label:this.$t("languages.en"),value:["en"],disabled:!1},{label:this.$t("languages.fr"),value:["fr"],disabled:!1},{label:this.$t("languages.de"),value:["de"],disabled:!1},{label:this.$t("languages.es"),value:["es"],disabled:!1},{label:this.$t("languages.pt"),value:["pt"],disabled:!1},{label:this.$t("languages.ar"),value:["ar"],disabled:!1},{label:this.$t("languages.zh-tw"),value:["zh-tw"],disabled:!1},{label:this.$t("languages.zh-cn"),value:["zh-cn"],disabled:!1}]},urgencies(){return this.product.length>1?[{label:this.$t("urgencies.all"),value:[1,2,3,4,5],disabled:!this.isAuthenticated}]:"photo"===this.product[0]?[{label:this.$t("urgencies.all-photos"),value:[1,2,3,4,5],disabled:!this.isAuthenticated},{label:this.$tc("urgencies.topshots",2),value:[1],disabled:!this.isAuthenticated}]:"news"===this.product[0]?[{label:this.$tc("urgencies.depeches",2),value:[1,2,3,4],disabled:!this.isAuthenticated},{label:this.$tc("urgencies.flash",2),value:[1],disabled:!this.isAuthenticated},{label:this.$tc("urgencies.alertes",2),value:[1,2],disabled:!this.isAuthenticated},{label:this.$tc("urgencies.urgents",2),value:[1,2,3],disabled:!this.isAuthenticated}]:[{label:this.$t("urgencies.all"),value:[1,2,3,4,5],disabled:!this.isAuthenticated}]},urgency:{get(){return this.params.urgencies},set(e){this.updateParams({urgencies:e})}},query:{get(){return this.params.query},set(e){this.$ga.event("search","set query",e),this.updateParams({query:e})}},dateTo:{get(){return this.params.dateTo},set(e){this.updateParams({dateTo:e})}}}),watch:{async paramsOpen(e){!0===e&&(await this.$nextTick(),this.$refs.search.focus())}},methods:Object(u["a"])({},Object(_["d"])(["updateColumnParams","resetColumn","moveColumn","closeColumn","openColumnSettings","closeColumnSettings"]),Object(_["b"])(["refreshColumn"]),{closeParams(){this.paramsOpen=!1},updateParams(e){const t=Object.assign({},this.params,e);this.updateColumnParams({indexCol:this.columnId,params:t}),this.reset()},reset(){this.noMore=!1,this.resetColumn({indexCol:this.columnId}),this.$refs.recyclist.reset()},async loadBefore(){const e=await this.refreshColumn({indexCol:this.columnId,more:"before"});!1===e&&(this.noMore=!0)},loadAfter(){return this.refreshColumn({indexCol:this.columnId,more:"after"})},move(e){this.moveColumn({indexCol:this.columnId,dir:e})},close(){this.closeColumn({indexCol:this.columnId})}})},j=$,D=(n("8b5a"),Object(C["a"])(j,d,m,!1,null,"233487e4",null));D.options.__file="Column.vue";var z=D.exports,E=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"btn-container"},[n("button",{staticClass:"btn",attrs:{id:"new-column",name:"new-column","aria-label":"Add new column"},on:{click:e.search}},[n("i",{staticClass:"UI-icon UI-plus"}),e._v(" "+e._s(e.$t("deck.add-column"))+"\n  ")])])},L=[],B={name:"AddColumn",methods:Object(u["a"])({},Object(_["d"])(["addColumn"]),{search(){"deck"!==this.$route.name&&this.$router.push({name:"deck"}),this.addColumn()}})},q=B,N=(n("08cd"),Object(C["a"])(q,E,L,!1,null,"4007e03c",null));N.options.__file="AddColumn.vue";var M=N.exports,F=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition-group",{attrs:{id:"sidebar",name:"appear",tag:"nav",appear:""}},[n("button",{key:"new-column",staticClass:"btn btn-circle btn-icon",attrs:{name:"new-column","aria-label":"Add new column"},on:{click:e.search}},[n("i",{staticClass:"UI-icon UI-plus"})]),e.isAuthenticated&&"tour"!==e.$route.name?e._e():n("router-link",{key:"authenticate",staticClass:"btn btn-icon btn-circle danger",attrs:{to:{name:"login"},name:"authenticate","aria-label":"Authenticate",tag:"button"}},[n("i",{staticClass:"UI-icon UI-user-male"})]),n("router-link",{key:"about",staticClass:"btn btn-circle btn-icon",attrs:{to:{name:"about"},name:"about","aria-label":"about",tag:"button"}},[n("i",{staticClass:"UI-icon UI-heart icon-small"})])],1)},R=[],U={name:"SideBar",computed:Object(u["a"])({},Object(_["c"])(["isAuthenticated"])),methods:Object(u["a"])({},Object(_["d"])(["addColumn"]),{search(){"deck"!==this.$route.name&&this.$router.push({name:"deck"}),this.addColumn()}})},H=U,V=(n("bba1"),Object(C["a"])(H,F,R,!1,null,"5b1988e1",null));V.options.__file="SideBar.vue";var K=V.exports,W={name:"AutoRefreshVisibility",mounted(){document.addEventListener("visibilitychange",this.visibilityChanged,!1)},beforeDestroy(){document.removeEventListener("visibilitychange",this.visibilityChanged,!1)},methods:Object(u["a"])({},Object(_["b"])(["refreshAllColumns"]),{visibilityChanged(){!0!==document.hidden&&!1!==navigator.onLine&&this.refreshAllColumns()}})},Y={name:"Deck",metaInfo:{titleTemplate:e=>{return e?`${e} | AFP Deck`:"AFP Deck"}},components:{Column:z,AddColumn:M,SideBar:K},mixins:[W],computed:Object(u["a"])({},Object(_["e"])(["columns"])),mounted(){this.refreshAllColumns()},methods:Object(u["a"])({},Object(_["b"])(["refreshAllColumns"]))},J=Y,G=(n("1fc4"),Object(C["a"])(J,l,c,!1,null,"d45f5d84",null));G.options.__file="Deck.vue";var Q=G.exports;s["default"].use(i["a"]);const X=[{name:"deck",path:"/",component:Q,meta:{analytics:{pageviewTemplate(e){return{title:"AFP Deck",page:e.path,location:window.location.href,dimension2:navigator.onLine.toString(),dimension3:r["a"].getters.isAuthenticated.toString()}}}},children:[{path:"doc",redirect:"/"},{name:"document",path:"doc/:docId",component:()=>n.e("viewer").then(n.bind(null,"f9ca")),props:!0,meta:{analytics:{pageviewTemplate(e){const t=r["a"].getters.getDocumentById(e.params.docId);return{title:t.headline,page:e.path,location:window.location.href,dimension1:t.product,dimension2:navigator.onLine.toString(),dimension3:r["a"].getters.isAuthenticated.toString()}}}}},{name:"slug",path:"slug/:slugs",beforeEnter:(e,t,n)=>{r["a"].commit("addColumn",{params:{query:e.params.slugs.split(",").map(e=>`slug:"${e}"`).join(" AND ")}}),n({name:"deck"})}},{name:"place",path:"place/:country/:city?",beforeEnter:(e,t,n)=>{r["a"].commit("addColumn",{params:{query:e.params.city?`country:"${e.params.country}" AND city:"${e.params.city}"`:`country:${e.params.country}`}}),n({name:"deck"})}},{name:"creator",path:"creator/:creator",beforeEnter:(e,t,n)=>{r["a"].commit("addColumn",{params:{query:`creator:"${e.params.creator}"`}}),n({name:"deck"})}},{name:"login",path:"login",component:()=>n.e("login").then(n.bind(null,"a55b")),meta:{analytics:{pageviewTemplate(e){return{title:"AFP Deck - Login",page:e.path,location:window.location.href,dimension2:navigator.onLine.toString(),dimension3:r["a"].getters.isAuthenticated.toString()}}}}},{name:"browser-warning",path:"browser-warning",component:()=>n.e("browser-warning").then(n.bind(null,"6580")),meta:{analytics:{pageviewTemplate(e){return{title:"AFP Deck - Browser warning",page:e.path,location:window.location.href,dimension2:navigator.onLine.toString(),dimension3:r["a"].getters.isAuthenticated.toString()}}}}},{name:"about",path:"about",component:()=>n.e("about").then(n.bind(null,"f820")),meta:{analytics:{pageviewTemplate(e){return{title:"AFP Deck - About",page:e.path,location:window.location.href,dimension2:navigator.onLine.toString(),dimension3:r["a"].getters.isAuthenticated.toString()}}}}},{name:"tour",path:"tour",component:()=>n.e("tour").then(n.bind(null,"37f6")),meta:{analytics:{pageviewTemplate(e){return{title:"AFP Deck - Tour",page:e.path,location:window.location.href,dimension2:navigator.onLine.toString(),dimension3:r["a"].getters.isAuthenticated.toString()}}}}}]}];var Z=new i["a"]({routes:X}),ee=n("0284"),te=n.n(ee);s["default"].use(te.a,{id:"UA-127064867-1",disabled:!1,router:Z,autoTracking:{pageviewOnLoad:!0,exception:!0},debug:{enabled:!1,sendHitTask:!0},anonymizeIp:!0,forceSSL:!0});var ne=n("d3a4"),se=n("3835"),ae=n("aa90"),oe=n.n(ae);const ie=Object(u["a"])({supportAllFeatures:Object.values(oe.a).every(e=>e),unsupportedFeatures:Object.entries(oe.a).filter(e=>{let t=Object(se["a"])(e,2),n=(t[0],t[1]);return!n})},oe.a),re={install(e){e.prototype.$modernizr=ie}};s["default"].use(re);var le=n("6591"),ce=n("c8b5"),ue=n.n(ce);delete ue.a.defaults.cssProps.userSelect,ue.a.defaults.touchAction="pan-y",s["default"].use(le["VueHammer"]);n("4e71"),n("707c");var de=n("f2d6"),me=n.n(de);s["default"].use(me.a);var pe,he=new me.a({useVuex:!0}),fe=n("9483");(Object(fe["a"])("sw.min.js",{ready(){console.log("Service worker is active.")},registered(e){console.log("Service worker has been registered.")},cached(e){console.log("Content has been cached for offline use.")},updatefound(e){console.log("New content is downloading.")},updated(e){console.log("New content is available; Ask for refresh."),window.confirm("New version available! OK to refresh?")&&e.waiting.postMessage({command:"skipWaiting"})},offline(){console.log("No internet connection found. App is running in offline mode.")},error(e){console.error("Error during service worker registration:",e)}}),"serviceWorker"in navigator)&&navigator.serviceWorker.addEventListener("controllerchange",async()=>{pe||(pe=!0,r["a"].commit("clearDocuments"),window.location.reload())});var ge=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view"),n("connectivity")],1)},ve=[],be=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"curtain",appear:""}},[e.connectivity.isConnected?e._e():n("div",{attrs:{id:"connectivity"}},[e._v("\n    "+e._s(e.$t("connectivity.message"))+"\n  ")])])},ye=[];const we=navigator.connection||navigator.mozConnection||navigator.webkitConnection;var Ce={name:"Connectivity",computed:Object(u["a"])({},Object(_["e"])(["connectivity"])),mounted(){if(!we)return!1;this.checkConnection(),we.addEventListener("change",this.checkConnection)},methods:Object(u["a"])({},Object(_["d"])(["setConnectivityStatus"]),{checkConnection(){const e=!0===navigator.onLine;this.setConnectivityStatus({isConnected:e})}})},Ie=Ce,Ae=(n("9f82"),Object(C["a"])(Ie,be,ye,!1,null,"67edc793",null));Ae.options.__file="Connectivity.vue";var ke=Ae.exports,xe={name:"App",components:{Connectivity:ke}},_e=xe,Te=(n("13a5"),n("9189"),Object(C["a"])(_e,ge,ve,!1,null,"2f20e112",null));Te.options.__file="index.vue";var Se=Te.exports;function Oe(){new s["default"]({router:Z,store:r["a"],i18n:ne["a"],wait:he,render:e=>e(Se)}).$mount("#app")}s["default"].config.productionTip=!1,Z.beforeEach(async(e,t,n)=>{if("document"===e.name&&!r["a"].getters.getDocumentById(e.params.docId))try{await r["a"].dispatch("getDocument",e.params.docId)}catch(s){return n({name:"login",query:{redirect:`doc/${e.params.docId}`}})}n()}),Z.beforeResolve((e,t,n)=>{return t.name&&["login","tour","document","about"].includes(t.name)||"deck"!==e.name||r["a"].getters.isAuthenticated?t.name&&["tour","document","about"].includes(t.name)||"deck"!==e.name||!r["a"].state.wantTour?void n():n({name:"tour"}):n({name:"login"})}),r["a"].dispatch("changeLocale",ne["a"].locale),Object(r["b"])().then(Oe)},"5be3":function(e,t,n){"use strict";n.d(t,"a",function(){return s});n("55dd");class s{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.doc={parsed:!0},this.uno=e,this.headline=e,this.published=e,this.lang=e,this.product=e,this.urgency=e,this.news=e,this.slugs=e,this.medias=e,this.iptc=e,this.source=e,this.creator=e,this.provider=e,this.city=e,this.country=e}set uno(e){let t=e.uno,n=void 0===t?"":t;this.doc.uno=n}set headline(e){let t=e.title,n=void 0===t?"":t;this.doc.headline=Array.isArray(n)?n.join(" - "):n}set published(e){let t=e.published,n=void 0===t?"":t;this.doc.published=n}set lang(e){let t=e.lang,n=void 0===t?"":t;this.doc.lang=n}set product(e){let t=e.product,n=void 0===t?"":t;this.doc.product=n}set urgency(e){let t=e.urgency,n=void 0===t?0:t;this.doc.urgency=n}set news(e){let t=e.news,n=void 0===t?[]:t;this.doc.news=n}set slugs(e){let t=e.slug,n=void 0===t?[]:t;this.doc.slugs=n}set medias(e){e.uno;let t,n=e.bagItem,s=void 0===n?[]:n,a=e.entity_faces;if(a){const e=a[0].faces[0].offsetY,n=s[0].medias.find(e=>"HighDef"===e.role).height;t=e/n}this.doc.medias=s.map(e=>{return{sizes:e.medias.sort((e,t)=>e.width-t.width),creator:e.creator,provider:e.provider,caption:e.caption,source:e.source,uno:e.uno,faceYOffsetPercent:t}})}set iptc(e){let t=e.iptc,n=void 0===t?[]:t;this.doc.iptc=n}set source(e){let t=e.source,n=void 0===t?"":t;this.doc.source=n}set creator(e){let t=e.creator,n=void 0===t?"":t;this.doc.creator=n}set provider(e){let t=e.provider,n=void 0===t?"":t;this.doc.provider=n}set city(e){let t=e.city,n=void 0===t?"":t;this.doc.city=n}set country(e){let t=e.country,n=void 0===t?"":t;this.doc.country=n}toObject(){return this.doc}}},"6a75":function(e,t,n){},"707c":function(e,t,n){"use strict";n.d(t,"a",function(){return c});var s=n("2b0e"),a=n("5a0c"),o=n.n(a),i=n("4208"),r=n.n(i);n("e5b7");o.a.extend(r.a);const l={install(e,t){e.filter("fromNow",e=>{return o()(e).from(o()())})}};function c(e){o.a.locale(e)}s["default"].use(l)},"7ff0":function(e,t,n){},"8b5a":function(e,t,n){"use strict";var s=n("a645"),a=n.n(s);a.a},9189:function(e,t,n){"use strict";var s=n("357c"),a=n.n(s);a.a},"9f82":function(e,t,n){"use strict";var s=n("7ff0"),a=n.n(s);a.a},a645:function(e,t,n){},a827:function(e,t,n){},aa90:function(e,t){(function(t){var n="Modernizr"in t,s=t.Modernizr;!function(e,t,n){function s(e,t){return typeof e===t}function a(){var e,t,n,a,o,i,r;for(var l in I)if(I.hasOwnProperty(l)){if(e=[],t=I[l],t.name&&(e.push(t.name.toLowerCase()),t.options&&t.options.aliases&&t.options.aliases.length))for(n=0;n<t.options.aliases.length;n++)e.push(t.options.aliases[n].toLowerCase());for(a=s(t.fn,"function")?t.fn():t.fn,o=0;o<e.length;o++)i=e[o],r=i.split("."),1===r.length?k[r[0]]=a:(!k[r[0]]||k[r[0]]instanceof Boolean||(k[r[0]]=new Boolean(k[r[0]])),k[r[0]][r[1]]=a),x.push((a?"":"no-")+r.join("-"))}}function o(e){var t=_.className,n=k._config.classPrefix||"";if(T&&(t=t.baseVal),k._config.enableJSClass){var s=new RegExp("(^|\\s)"+n+"no-js(\\s|$)");t=t.replace(s,"$1"+n+"js$2")}k._config.enableClasses&&(t+=" "+n+e.join(" "+n),T?_.className.baseVal=t:_.className=t)}function i(){return"function"!=typeof t.createElement?t.createElement(arguments[0]):T?t.createElementNS.call(t,"http://www.w3.org/2000/svg",arguments[0]):t.createElement.apply(t,arguments)}function r(e,t){return!!~(""+e).indexOf(t)}function l(){var e=t.body;return e||(e=i(T?"svg":"body"),e.fake=!0),e}function c(e,n,s,a){var o,r,c,u,d="modernizr",m=i("div"),p=l();if(parseInt(s,10))for(;s--;)c=i("div"),c.id=a?a[s]:d+(s+1),m.appendChild(c);return o=i("style"),o.type="text/css",o.id="s"+d,(p.fake?p:m).appendChild(o),p.appendChild(m),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(t.createTextNode(e)),m.id=d,p.fake&&(p.style.background="",p.style.overflow="hidden",u=_.style.overflow,_.style.overflow="hidden",_.appendChild(p)),r=n(m,e),p.fake?(p.parentNode.removeChild(p),_.style.overflow=u,_.offsetHeight):m.parentNode.removeChild(m),!!r}function u(e){return e.replace(/([A-Z])/g,function(e,t){return"-"+t.toLowerCase()}).replace(/^ms-/,"-ms-")}function d(t,n,s){var a;if("getComputedStyle"in e){a=getComputedStyle.call(e,t,n);var o=e.console;if(null!==a)s&&(a=a.getPropertyValue(s));else if(o){var i=o.error?"error":"log";o[i].call(o,"getComputedStyle returning null, its possible modernizr test results are inaccurate")}}else a=!n&&t.currentStyle&&t.currentStyle[s];return a}function m(t,s){var a=t.length;if("CSS"in e&&"supports"in e.CSS){for(;a--;)if(e.CSS.supports(u(t[a]),s))return!0;return!1}if("CSSSupportsRule"in e){for(var o=[];a--;)o.push("("+u(t[a])+":"+s+")");return o=o.join(" or "),c("@supports ("+o+") { #modernizr { position: absolute; } }",function(e){return"absolute"==d(e,null,"position")})}return n}function p(e){return e.replace(/([a-z])-([a-z])/g,function(e,t,n){return t+n.toUpperCase()}).replace(/^-/,"")}function h(e,t,a,o){function l(){u&&(delete $.style,delete $.modElem)}if(o=!s(o,"undefined")&&o,!s(a,"undefined")){var c=m(e,a);if(!s(c,"undefined"))return c}for(var u,d,h,f,g,v=["modernizr","tspan","samp"];!$.style&&v.length;)u=!0,$.modElem=i(v.shift()),$.style=$.modElem.style;for(h=e.length,d=0;h>d;d++)if(f=e[d],g=$.style[f],r(f,"-")&&(f=p(f)),$.style[f]!==n){if(o||s(a,"undefined"))return l(),"pfx"!=t||f;try{$.style[f]=a}catch(b){}if($.style[f]!=g)return l(),"pfx"!=t||f}return l(),!1}function f(e,t){return function(){return e.apply(t,arguments)}}function g(e,t,n){var a;for(var o in e)if(e[o]in t)return!1===n?e[o]:(a=t[e[o]],s(a,"function")?f(a,n||t):a);return!1}function v(e,t,n,a,o){var i=e.charAt(0).toUpperCase()+e.slice(1),r=(e+" "+O.join(i+" ")+i).split(" ");return s(t,"string")||s(t,"undefined")?h(r,t,a,o):(r=(e+" "+j.join(i+" ")+i).split(" "),g(r,t,n))}function b(e,t,s){return v(e,n,n,t,s)}function y(e,t){return e-1===t||e===t||e+1===t}function w(e,t){if("object"==typeof e)for(var n in e)q(e,n)&&w(n,e[n]);else{e=e.toLowerCase();var s=e.split("."),a=k[s[0]];if(2==s.length&&(a=a[s[1]]),"undefined"!=typeof a)return k;t="function"==typeof t?t():t,1==s.length?k[s[0]]=t:(!k[s[0]]||k[s[0]]instanceof Boolean||(k[s[0]]=new Boolean(k[s[0]])),k[s[0]][s[1]]=t),o([(t&&0!=t?"":"no-")+s.join("-")]),k._trigger(e,t)}return k}function C(e,t){var n=e.deleteDatabase(t);n.onsuccess=function(){w("indexeddb.deletedatabase",!0)},n.onerror=function(){w("indexeddb.deletedatabase",!1)}}var I=[],A={_version:"3.6.0",_config:{classPrefix:"",enableClasses:!0,enableJSClass:!0,usePrefixes:!0},_q:[],on:function(e,t){var n=this;setTimeout(function(){t(n[e])},0)},addTest:function(e,t,n){I.push({name:e,fn:t,options:n})},addAsyncTest:function(e){I.push({name:null,fn:e})}},k=function(){};k.prototype=A,k=new k;var x=[],_=t.documentElement,T="svg"===_.nodeName.toLowerCase();k.addTest("bgpositionshorthand",function(){var e=i("a"),t=e.style,n="right 10px bottom 10px";return t.cssText="background-position: "+n+";",t.backgroundPosition===n});var S="Moz O ms Webkit",O=A._config.usePrefixes?S.split(" "):[];A._cssomPrefixes=O;var P={elem:i("modernizr")};k._q.push(function(){delete P.elem});var $={style:P.elem.style};k._q.unshift(function(){delete $.style});var j=A._config.usePrefixes?S.toLowerCase().split(" "):[];A._domPrefixes=j,A.testAllProps=v,A.testAllProps=b,k.addTest("bgpositionxy",function(){return b("backgroundPositionX","3px",!0)&&b("backgroundPositionY","5px",!0)}),k.addTest("bgrepeatround",b("backgroundRepeat","round")),k.addTest("bgrepeatspace",b("backgroundRepeat","space")),k.addTest("backgroundsize",b("backgroundSize","100%",!0)),k.addTest("bgsizecover",b("backgroundSize","cover")),k.addTest("borderradius",b("borderRadius","0px",!0)),k.addTest("boxshadow",b("boxShadow","1px 1px",!0)),k.addTest("boxsizing",b("boxSizing","border-box",!0)&&(t.documentMode===n||t.documentMode>7)),k.addTest("flexbox",b("flexBasis","1px",!0));var D=A.testStyles=c,z=function(){var e=navigator.userAgent,t=e.match(/w(eb)?osbrowser/gi),n=e.match(/windows phone/gi)&&e.match(/iemobile\/([0-9])+/gi)&&parseFloat(RegExp.$1)>=9;return t||n}();z?k.addTest("fontface",!1):D('@font-face {font-family:"font";src:url("https://")}',function(e,n){var s=t.getElementById("smodernizr"),a=s.sheet||s.styleSheet,o=a?a.cssRules&&a.cssRules[0]?a.cssRules[0].cssText:a.cssText||"":"",i=/src/i.test(o)&&0===o.indexOf(n.split(" ")[0]);k.addTest("fontface",i)});var E=function(){var t=e.matchMedia||e.msMatchMedia;return t?function(e){var n=t(e);return n&&n.matches||!1}:function(t){var n=!1;return c("@media "+t+" { #modernizr { position: absolute; } }",function(t){n="absolute"==(e.getComputedStyle?e.getComputedStyle(t,null):t.currentStyle).position}),n}}();A.mq=E,k.addTest("mediaqueries",E("only all"));var L=A._config.usePrefixes?" -webkit- -moz- -o- -ms- ".split(" "):["",""];A._prefixes=L,k.addTest("opacity",function(){var e=i("a").style;return e.cssText=L.join("opacity:.55;"),/^0.55$/.test(e.opacity)}),k.addTest("csspointerevents",function(){var e=i("a").style;return e.cssText="pointer-events:auto","auto"===e.pointerEvents}),k.addTest("rgba",function(){var e=i("a").style;return e.cssText="background-color:rgba(150,255,150,.5)",(""+e.backgroundColor).indexOf("rgba")>-1});var B=A.testProp=function(e,t,s){return h([e],n,t,s)};k.addTest("textshadow",B("textShadow","1px 1px")),k.addTest("csstransforms",function(){return-1===navigator.userAgent.indexOf("Android 2.")&&b("transform","scale(1)",!0)});var q,N="CSS"in e&&"supports"in e.CSS,M="supportsCSS"in e;k.addTest("supports",N||M),k.addTest("csstransforms3d",function(){return!!b("perspective","1px",!0)}),k.addTest("csstransitions",b("transition","all",!0)),D("#modernizr { width: 50vw; }",function(t){var n=parseInt(e.innerWidth/2,10),s=parseInt(d(t,null,"width"),10);k.addTest("cssvwunit",y(s,n))}),k.addTest("willchange","willChange"in _.style),function(){var e={}.hasOwnProperty;q=s(e,"undefined")||s(e.call,"undefined")?function(e,t){return t in e&&s(e.constructor.prototype[t],"undefined")}:function(t,n){return e.call(t,n)}}(),A._l={},A.on=function(e,t){this._l[e]||(this._l[e]=[]),this._l[e].push(t),k.hasOwnProperty(e)&&setTimeout(function(){k._trigger(e,k[e])},0)},A._trigger=function(e,t){if(this._l[e]){var n=this._l[e];setTimeout(function(){var e;for(e=0;e<n.length;e++)(0,n[e])(t)},0),delete this._l[e]}},k._q.push(function(){A.addTest=w}),k.addAsyncTest(function(){var e,t,n,s=i("img"),a="sizes"in s;!a&&"srcset"in s?(t="data:image/gif;base64,R0lGODlhAgABAPAAAP///wAAACH5BAAAAAAALAAAAAACAAEAAAICBAoAOw==",e="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",n=function(){w("sizes",2==s.width)},s.onload=n,s.onerror=n,s.setAttribute("sizes","9px"),s.srcset=e+" 1w,"+t+" 8w",s.src=e):w("sizes",a)}),k.addTest("srcset","srcset"in i("img"));var F=function(t){var s,a=L.length,o=e.CSSRule;if("undefined"==typeof o)return n;if(!t)return!1;if(t=t.replace(/^@/,""),s=t.replace(/-/g,"_").toUpperCase()+"_RULE",s in o)return"@"+t;for(var i=0;a>i;i++){var r=L[i],l=r.toUpperCase()+"_"+s;if(l in o)return"@-"+r.toLowerCase()+"-"+t}return!1};A.atRule=F;var R=A.prefixed=function(e,t,n){return 0===e.indexOf("@")?F(e):(-1!=e.indexOf("-")&&(e=p(e)),t?v(e,t,n):v(e,"pfx"))};k.addAsyncTest(function(){var t;try{t=R("indexedDB",e)}catch(n){}if(t){var s="modernizr-"+Math.random(),a=t.open(s);a.onerror=function(){a.error&&"InvalidStateError"===a.error.name?w("indexeddb",!1):(w("indexeddb",!0),C(t,s))},a.onsuccess=function(){w("indexeddb",!0),C(t,s)}}else w("indexeddb",!1)}),k.addTest("pagevisibility",!!R("hidden",t,!1)),k.addTest("serviceworker","serviceWorker"in navigator),k.addTest("localstorage",function(){var e="modernizr";try{return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch(t){return!1}}),a(),o(x),delete A.addTest,delete A.addAsyncTest;for(var U=0;U<k._q.length;U++)k._q[U]();e.Modernizr=k}(t,document),e.exports=t.Modernizr,n?t.Modernizr=s:delete t.Modernizr})(window)},ae8d:function(e,t,n){"use strict";var s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.doc?n("router-link",{class:{flash:1===e.doc.urgency,alerte:"photo"!==e.doc.product&&2===e.doc.urgency,urgent:"photo"!==e.doc.product&&3===e.doc.urgency,viewed:e.viewed,photo:"photo"===e.doc.product},attrs:{lang:e.doc.lang,dir:"ar"===e.doc.lang?"rtl":"ltr",to:{name:"document",params:{indexCol:e.indexCol,docId:e.docId}},tag:"article"}},[e.doc.medias.length>0&&e.doc.medias[0].sizes.some(function(e){return"Preview"===e.role})?n("div",{staticClass:"img-container",style:{backgroundImage:"url("+e.doc.medias[0].sizes.find(function(e){return"Preview"===e.role}).href+")",backgroundPosition:e.doc.medias[0].faceYOffsetPercent?"0px "+100*e.doc.medias[0].faceYOffsetPercent+"%":null}},[["sidtv","parismode","afptvweb","afptv1st","videographie"].includes(e.doc.product)?n("i",{staticClass:"UI-icon UI-play-video"}):e._e()]):e._e(),n("div",{staticClass:"cols"},[n("p",{key:"date-"+e.locale,staticClass:"published"},[e._v("\n      "+e._s(e._f("fromNow")(e.doc.published))+"\n    ")]),"photo"===e.doc.product&&1===e.doc.urgency?n("p",{staticClass:"topshot"},[e._v("\n      Topshot\n    ")]):e._e()]),"photo"!==e.doc.product?n("h2",[e._v("\n    "+e._s(e.doc.headline)+"\n  ")]):e._e(),["news","multimedia"].includes(e.doc.product)&&e.doc.urgency>2&&e.doc.news&&e.doc.news[0]?n("p",{staticClass:"lead"},[e._v("\n    "+e._s(e.doc.news[0].substr(0,100)+"...")+"\n  ")]):e._e()]):e._e()},a=[],o=n("be94"),i=n("2f62"),r={name:"Card",props:{docId:{type:String,required:!0},indexCol:{type:Number,required:!1,default:null}},computed:Object(o["a"])({},Object(i["e"])(["locale"]),Object(i["c"])(["getDocumentById","isDocumentViewed"]),{viewed(){return this.isDocumentViewed(this.docId)},doc(){return this.getDocumentById(this.docId)}})},l=r,c=(n("df74"),n("2877")),u=Object(c["a"])(l,s,a,!1,null,"4189f3c6",null);u.options.__file="Card.vue";t["a"]=u.exports},b10e:function(e,t,n){"use strict";var s=n("1126"),a=n.n(s);a.a},bba1:function(e,t,n){"use strict";var s=n("3b81"),a=n.n(s);a.a},d3a4:function(e,t,n){"use strict";n.d(t,"b",function(){return p});var s=n("15fd"),a=n("2b0e"),o=n("a925");a["default"].use(o["a"]);const i=["en","fr"],r=i[0],l={[r]:n("fca5")(`./${r}`)},c={[r]:l[r].dateTimeFormats};function u(){const e=navigator.language&&navigator.language.substring(0,2);return!(!e||!i.includes(e))&&e}const d=new o["a"]({locale:u()||r,fallbackLocale:r,messages:l,dateTimeFormats:c});function m(e){return d.locale=e,document.querySelector("html").setAttribute("lang",e),e}async function p(e){if(d.locale!==e||!d.messages[e]){const t=await n("39c3")(`./${e}.json`),a=t.default,o=a.dateTimeFormats,i=Object(s["a"])(a,["dateTimeFormats"]);return d.setLocaleMessage(e,i),d.setDateTimeFormat(e,o),m(e)}return Promise.resolve(m(e))}t["a"]=d},df74:function(e,t,n){"use strict";var s=n("a827"),a=n.n(s);a.a},edd4:function(e){e.exports={"back-to-home":"Back to home",submit:"Submit",loading:"Loading...","install-app":"Add to home screen",deck:{"add-column":"Add a new column"},column:{search:"Search...",product:"Select content",lang:"Document language",urgency:"Category of news story",until:"Until","no-result":"No result",delete:"Delete the column",refresh:"Refresh ?","documents-gap":"Since your last visit, you missed {count} documents."},about:{title:"About AFP Deck",description:["AFP News Deck is a reader for AFP feeds. It allows you to find and read stories, multimedia articles and photos directly in your browser.","Made with love by the AFP Dataviz team, based on an original idea from the Medialab. Data is provided by the AFP Content API."],version:"Version"},auth:{success:{title:"You're logged in correctly.",description:"Enjoy AFP Deck !"},logout:"Logout",clientId:"Client ID",clientSecret:"Client Secret",username:"Username",password:"Password","not-authenticated":{title:"Log in to see the latest news",external:"If you don't work at AFP and you want to connect using a specific client id, {0}.",afp:"If you want to log in using your AFP account, {0}.",click:"click here"}},products:{all:"in all products",news:"in the news",multimedia:"in multimedia articles",photo:"in photos",infographie:"in graphics",videographie:"in videographics",video:"in videos"},languages:{all:"in all languages",en:"in english",fr:"in french",de:"in german",es:"in spanish",pt:"in portuguese",ar:"in arabic","zh-tw":"in traditionnal Chinese","zh-cn":"in simplified Chinese"},urgencies:{all:"All news stories","all-photos":"All photos",flash:"Only flashes",alertes:"include alerts",urgents:"include urgents",depeches:"All news stories",topshots:"Only topshots"},connectivity:{message:"Your device lost its internet connection."},dateTimeFormats:{short:{year:"numeric",month:"short",day:"numeric"},long:{year:"numeric",month:"short",day:"numeric",weekday:"short",hour:"numeric",minute:"numeric"}},tour:{goto:"Getting started",search:"Type your search terms here, then enter. <p><small>You can use conditional operatos like AND and OR, or search in specific fields using title:Worldcup by example</small></p>",products:"News, photos, graphics : decide what product you want. <p><small>When you're not logged in, you only view multimedia news wire from the previous day.</small></p>",languages:"6 languages are available. Select yours <p><small>Photos are only available in English</small></p>",urgencies:"You can decide to display only important articles like alerts, flashes, or topshots for photos.","date-picker":"Articles are sorted from the newest to the oldest. <p><small>Use this selector to search for a specific date.</small></p>",new:"Click here to add a column and start a new search.",authenticate:"Log in with your AFP credentials to start reading the latest articles."},"browser-warning":{title:"Warning",description:"Your browser is not compatible with this app. Use a recent browser for an optimal experience.","unsupported-features":"Unsupported features"},document:{share:"Share","related-articles":"Related articles"}}},f693:function(e){e.exports={"back-to-home":"Retour  l'accueil",submit:"Valider",loading:"Chargement...","install-app":"Installer sur l'cran d'accueil",deck:{"add-column":"Ajouter une colonne"},column:{search:"Rechercher...",product:"Slectionnez un produit",lang:"Slectionnez une langue",urgency:"Slectionnez une urgence",until:"Jusqu'au","no-result":"Pas de rsultats",delete:"Supprimer la colonne",refresh:"Rafrachir ?","documents-gap":"Depuis votre dernire visite, vous avez manqu {count} documents."},about:{title:" propos d'AFP Deck",description:["AFP News Deck permet de lire les dpches, photos et vidos diffuses par l'AFP, directement dans votre navigateur.","Conu par l'quipe Dataviz de l'AFP, sur une ide originale du Mdialab. Les donnes proviennent de l'API AFP."],version:"Version"},auth:{success:{title:"Vous tes connect",description:"Profitez d'AFP Deck !"},logout:"Se dconnecter",clientId:"ID Client",clientSecret:"Secret Client",username:"Nom d'utilisateur",password:"Mot de passe","not-authenticated":{title:"Connectez-vous pour bnficier des dernires nouvelles",external:"Si vous ne travaillez pas  l'AFP et dsirez vous connecter avec un compte client spcifique, {0}.",afp:"Si vous souhaitez vous connecter avec le compte AFP, {0}.",click:"cliquez ici"}},products:{all:"dans tous les produits",news:"dans les dpches",multimedia:"dans le fil multimdia",photo:"dans les photos",infographie:"dans les infographies",videographie:"dans les vidographies",video:"dans les vidos"},languages:{all:"dans toutes les langues",en:"en anglais",fr:"en franais",de:"en allemand",es:"en espagnol",pt:"en portugais",ar:"en arabe","zh-tw":"en chinois traditionnel","zh-cn":"en chinois simplifi"},urgencies:{all:"Tout le contenu","all-photos":"Toutes les photos",flash:"Uniquement les flashs",alertes:"inclure les alertes",urgents:"inclure les urgents",depeches:"Tout le contenu",topshots:"Uniquement les topshots"},connectivity:{message:"Votre appareil a perdu la connexion."},dateTimeFormats:{short:{year:"numeric",month:"short",day:"numeric"},long:{year:"numeric",month:"short",day:"numeric",weekday:"short",hour:"numeric",minute:"numeric"}},tour:{goto:"Faire la visite guide",search:"Tapez votre recherche ici, puis faites entrer pour valider. <p><small>Vous pouvez utiliser les oprateurs AND et OR, ou des recherches spcifiques dans le titre comme title:Mondial</small></p>",products:"Dpches, photos, infographies : slectionnez le contenu que vous recherchez. <p><small>Lorsque vous n'tes pas connects, vous n'avez accs qu'au fil multimdia, avec 24h de dlai.</small></p>",languages:"6 langues sont gnralement disponibles. <p><small>Les photos ne sont en revanche disponibles que sur le fil anglais.</small></p>",urgencies:"Vous pouvez dcider de n'afficher que les informations les plus importantes, commes les alertes et les flashs, ou les topshots pour les photos.","date-picker":"Les articles sont classs du plus rcent au plus ancien, et dfilent  l'infini. <p><small>Slectionnez une date ici si vous souhaitez recherche jusqu' une date particulire.</small></p>",new:"Cliquez ici pour ajouter une nouvelle colonne de contenus, et faire de nouvelles recherches.",authenticate:"Authentifiez-vous avec vos identifiants AFP pour accder  tous les contenus, y compris les plus rcents."},"browser-warning":{title:"Attention",description:"Votre navigateur est incompatible avec certaines fonctionnalits de cette application. Essayez d'utiliser un navigateur plus moderne pour une exprience optimale.","unsupported-features":"Fonctionnalits non supportes"},document:{share:"Partager","related-articles":"Sur la mme thmatique"}}},fca5:function(e,t,n){var s={"./en":"edd4","./en.json":"edd4","./fr":"f693","./fr.json":"f693"};function a(e){var t=o(e);return n(t)}function o(e){var t=s[e];if(!(t+1)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return t}a.keys=function(){return Object.keys(s)},a.resolve=o,e.exports=a,a.id="fca5"}});
//# sourceMappingURL=app.4569dd90.js.map